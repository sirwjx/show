window.__require=function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!o&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=r[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,r,n)}return r[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({CharacterAttribute:[function(t,e,r){"use strict";cc._RF.push(e,"7d3594UP9tBZa6ExJt/MNK0","CharacterAttribute");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../script/frameworks/EventMgr"),o=t("../../script/frameworks/SuperPanel"),c=t("../../script/frameworks/UIMgr"),l=t("./RestartEnum"),u=t("./RestartMgr"),h=cc._decorator,p=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.updateUI()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),u.RestartMgr.instance.updateAttribute()},e.prototype.init=function(e){t.prototype.init.call(this,e),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute)},e.prototype.onMessageEvent=function(){t.prototype.onMessageEvent.call(this),this.view.img_reduce1.on("click",this.clickReduce1,this),this.view.img_reduce2.on("click",this.clickReduce2,this),this.view.img_reduce3.on("click",this.clickReduce3,this),this.view.img_reduce4.on("click",this.clickReduce4,this),this.view.img_add1.on("click",this.clickAdd1,this),this.view.img_add2.on("click",this.clickAdd2,this),this.view.img_add3.on("click",this.clickAdd3,this),this.view.img_add4.on("click",this.clickAdd4,this),this.view.randomBtn.on("click",this.clickRandomBtn,this),this.view.goBtn.on("click",this.clickGoBtn,this)},e.prototype.offMessageEvent=function(){this.view.img_reduce1.off("click",this.clickReduce1,this),this.view.img_reduce2.off("click",this.clickReduce2,this),this.view.img_reduce3.off("click",this.clickReduce3,this),this.view.img_reduce4.off("click",this.clickReduce4,this),this.view.img_add1.off("click",this.clickAdd1,this),this.view.img_add2.off("click",this.clickAdd2,this),this.view.img_add3.off("click",this.clickAdd3,this),this.view.img_add4.off("click",this.clickAdd4,this),this.view.randomBtn.off("click",this.clickRandomBtn,this),this.view.goBtn.off("click",this.clickGoBtn,this)},e.prototype.clickRandomBtn=function(){u.RestartMgr.instance.randomAllocation(),this.tools.text("lab10",u.RestartMgr.instance.chr),this.tools.text("lab11",u.RestartMgr.instance.int),this.tools.text("lab12",u.RestartMgr.instance.str),this.tools.text("lab13",u.RestartMgr.instance.mny),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute)},e.prototype.clickGoBtn=function(){u.RestartMgr.instance.allAttribute>0?c.UIMgr.instance.tips("\u4f60\u8fd8\u6709"+u.RestartMgr.instance.allAttribute+"\u5c5e\u6027\u70b9\u6ca1\u6709\u5206\u914d\u5b8c\uff01"):(a.EventMgr.dispatchEvent(l.RestartEnum.EVENT_RESTARTGAME_GAME,2),this.destroyPrefab())},e.prototype.clickReduce1=function(){u.RestartMgr.instance.chr<=0||(u.RestartMgr.instance.chr--,u.RestartMgr.instance.allAttribute++,u.RestartMgr.instance.chr<=0&&(u.RestartMgr.instance.chr=0),this.tools.text("lab10",u.RestartMgr.instance.chr),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickReduce2=function(){u.RestartMgr.instance.int<=0||(u.RestartMgr.instance.int--,u.RestartMgr.instance.allAttribute++,u.RestartMgr.instance.int<0&&(u.RestartMgr.instance.int=0),this.tools.text("lab11",u.RestartMgr.instance.int),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickReduce3=function(){u.RestartMgr.instance.str<=0||(u.RestartMgr.instance.str--,u.RestartMgr.instance.allAttribute++,u.RestartMgr.instance.str<=0&&(u.RestartMgr.instance.str=0),this.tools.text("lab12",u.RestartMgr.instance.str),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickReduce4=function(){u.RestartMgr.instance.mny<=0||(u.RestartMgr.instance.mny--,u.RestartMgr.instance.allAttribute++,u.RestartMgr.instance.mny<=0&&(u.RestartMgr.instance.mny=0),this.tools.text("lab13",u.RestartMgr.instance.mny),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickAdd1=function(){u.RestartMgr.instance.chr>=10||u.RestartMgr.instance.allAttribute<=0||(u.RestartMgr.instance.chr++,u.RestartMgr.instance.allAttribute--,this.tools.text("lab10",u.RestartMgr.instance.chr),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickAdd2=function(){u.RestartMgr.instance.int>=10||u.RestartMgr.instance.allAttribute<=0||(u.RestartMgr.instance.int++,u.RestartMgr.instance.allAttribute--,this.tools.text("lab11",u.RestartMgr.instance.int),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickAdd3=function(){u.RestartMgr.instance.str>=10||u.RestartMgr.instance.allAttribute<=0||(u.RestartMgr.instance.str++,u.RestartMgr.instance.allAttribute--,this.tools.text("lab12",u.RestartMgr.instance.str),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.clickAdd4=function(){u.RestartMgr.instance.mny>=10||u.RestartMgr.instance.allAttribute<=0||(u.RestartMgr.instance.mny++,u.RestartMgr.instance.allAttribute--,this.tools.text("lab13",u.RestartMgr.instance.mny),this.tools.text("lab5","\u53ef\u7528\u5c5e\u6027\u70b9\uff1a"+u.RestartMgr.instance.allAttribute))},e.prototype.updateUI=function(){var t=u.RestartMgr.instance.selectList,e=0;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r],i="lab_"+e,s=n.name+"("+n.description+")";this.tools.text(i,s),e++}},s([p],e)}(o.default));r.default=f,cc._RF.pop()},{"../../script/frameworks/EventMgr":void 0,"../../script/frameworks/SuperPanel":void 0,"../../script/frameworks/UIMgr":void 0,"./RestartEnum":"RestartEnum","./RestartMgr":"RestartMgr"}],Condition:[function(t,e,r){"use strict";function n(t){var e=[],r=t.length,n=[];n.unshift(e);for(var i=0,s=function(e){var r=t.substring(i,e).trim();i=e,r&&n[0].push(r)},a=0;a<r;a++)switch(t[a]){case" ":continue;case"(":s(a),i++;var o=[];n[0].push(o),n.unshift(o);break;case")":s(a),i++,n.shift();break;case"|":case"&":s(a),s(a+1);break;default:continue}return s(r),e}function i(t,e){if(!Array.isArray(e))return s(t,e);if(0==e.length)return!0;if(1==e.length)return i(t,e[0]);for(var r=i(t,e[0]),n=1;n<e.length;n+=2)switch(e[n]){case"&":r&&(r=i(t,e[n+1]));break;case"|":if(r)return!0;r=i(t,e[n+1]);break;default:return!1}return r}function s(t,e){var r=e.length,n=e.search(/[><\!\?=]/),i=e.substring(0,n),s=e.substring(n,n+="="==e[n+1]?2:1),a=e.substring(n,r),o=t.get(i),c="["==a[0]?JSON.parse(a):Number(a);switch(s){case">":return o>c;case"<":return o<c;case">=":return o>=c;case"<=":return o<=c;case"=":return Array.isArray(o)?o.includes(c):o==c;case"!=":return Array.isArray(o)?!o.includes(c):o==c;case"?":if(Array.isArray(o)){for(var l=0,u=o;l<u.length;l++){var h=u[l];if(c.includes(h))return!0}return!1}return c.includes(o);case"!":if(Array.isArray(o)){for(var p=0,f=o;p<f.length;p++)if(h=f[p],c.includes(h))return!1;return!0}return!c.includes(o);default:return!1}}cc._RF.push(e,"bbb57P8yCNO9oDr2qnZTOP9","Condition"),Object.defineProperty(r,"__esModule",{value:!0}),r.checkCondition=void 0,r.checkCondition=function(t,e){return i(t,n(e))},cc._RF.pop()},{}],DrawCardItem:[function(t,e,r){"use strict";cc._RF.push(e,"6f416bDbo1JNapa/Qxo/YX8","DrawCardItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../script/frameworks/BasePanel"),o=t("../../script/frameworks/EventMgr"),c=t("../../script/frameworks/UIMgr"),l=t("./RestartEnum"),u=t("./RestartMgr"),h=cc._decorator,p=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgState=0,e.select=!1,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.updateUI()},e.prototype.showBtnBg=function(){this.tools.visible("orange",1==this.bgState),this.tools.visible("blue",2==this.bgState),this.tools.visible("purple",3==this.bgState)},e.prototype.updateUI=function(){var t=this.myData.name+"("+this.myData.description+")";this.tools.text("text",t),this.tools.visible("select",!1),this.bgState=this.myData.grade,this.showBtnBg()},e.prototype.onMessageEvent=function(){t.prototype.onMessageEvent.call(this),this.node.on("click",this.clickBtn,this),o.EventMgr.on(l.RestartEnum.EVENT_RESTARTGAME_ITEM_SELECT,this.selectState,this)},e.prototype.offMessageEvent=function(){t.prototype.offMessageEvent.call(this),this.node.off("click",this.clickBtn,this),o.EventMgr.off(l.RestartEnum.EVENT_RESTARTGAME_ITEM_SELECT,this.selectState,this)},e.prototype.clickBtn=function(){this.select=!this.select,this.select&&3==u.RestartMgr.instance.getSelectLen()?c.UIMgr.instance.tips("\u53ea\u80fd\u90093\u4e2a\u5929\u8d4b"):(this.tools.visible("select",this.select),this.select?u.RestartMgr.instance.pushList(this.myData.id,this.myData):u.RestartMgr.instance.delList(this.myData.id))},e.prototype.selectState=function(){this.select=!this.select,this.tools.visible("select",this.select)},s([p],e)}(a.BasePanel));r.default=f,cc._RF.pop()},{"../../script/frameworks/BasePanel":void 0,"../../script/frameworks/EventMgr":void 0,"../../script/frameworks/UIMgr":void 0,"./RestartEnum":"RestartEnum","./RestartMgr":"RestartMgr"}],Event:[function(t,e,r){"use strict";cc._RF.push(e,"44940BAweZLTZ/c8w6gfG79","Event"),Object.defineProperty(r,"__esModule",{value:!0});var n=t("./Util"),i=t("./Condition"),s=function(){function t(){}return t.prototype.initial=function(t){var e=t.events;for(var r in this.events=e,e){var n=e[r];n.branch&&(n.branch=n.branch.map(function(t){return(t=t.split(":"))[1]=Number(t[1]),t}))}},t.prototype.check=function(t,e){var r=this.get(t),n=r.include,s=r.exclude;return!r.NoRandom&&(!s||!i.checkCondition(e,s))&&(!n||i.checkCondition(e,n))},t.prototype.get=function(t){var e=this.events[t];if(!e)throw new Error("[ERROR] No Event["+t+"]");return n.clone(e)},t.prototype.information=function(t){return{description:this.get(t).event}},t.prototype.do=function(t,e){var r=this.get(t),n=r.effect,s=r.branch,a=r.event,o=r.postEvent;if(s)for(var c=0,l=s;c<l.length;c++){var u=l[c],h=u[0],p=u[1];if(i.checkCondition(e,h))return{effect:n,next:p,description:a}}return{effect:n,postEvent:o,description:a}},t}();r.default=s,cc._RF.pop()},{"./Condition":"Condition","./Util":"Util"}],Life:[function(t,e,r){"use strict";cc._RF.push(e,"bf4125dsFFK2pp7GgFsnUHf","Life");var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function a(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return c([t,e])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(o){s=[6,o],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var s=t("./Property"),a=t("./Event"),o=t("./Talent"),c=function(){function t(){this.property=new s.default,this.event=new a.default,this.talent=new o.default}return t.prototype.initial=function(t){return n(this,void 0,void 0,function(){var e,r,n;return i(this,function(){return e=t.age,r=t.talents,n=t.events,this.property.initial({age:e}),this.talent.initial({talents:r}),this.event.initial({events:n}),[2]})})},t.prototype.restart=function(t){this.triggerTalents=new Set,this.property.restart(t),this.doTalent(),this.property.record()},t.prototype.getTalentAllocationAddition=function(t){return this.talent.allocationAddition(t)},t.prototype.next=function(){var t=this.property.ageNext(),e=t.age,r=t.event,n=t.talent,i=this.doTalent(n),s=this.doEvent(this.random(r));this.property.record();var a=this.property.isEnd();return{age:e,content:[i,s].flat(),isEnd:a}},t.prototype.doTalent=function(t){var e=this;void 0===t&&(t=null),t&&this.property.change(this.property.TYPES.TLT,t);for(var r=[],n=0,i=t=this.property.get(this.property.TYPES.TLT).filter(function(t){return!e.triggerTalents.has(t)});n<i.length;n++){var s=i[n],a=this.talent.do(s,this.property);if(a){this.triggerTalents.add(s);var o=a.effect,c=a.name,l=a.description,u=a.grade;r.push({type:this.property.TYPES.TLT,name:c,grade:u,description:l}),o&&this.property.effect(o)}}return r},t.prototype.doEvent=function(t){var e=this.event.do(t,this.property),r=e.effect,n=e.next,i=e.description,s=e.postEvent;this.property.change(this.property.TYPES.EVT,t),this.property.effect(r);var a={type:this.property.TYPES.EVT,description:i,postEvent:s};return n?[a,this.doEvent(n)].flat():[a]},t.prototype.random=function(t){for(var e=this,r=0,n=0,i=t=t.filter(function(t){var r=t[0];return e.event.check(r,e.property)});n<i.length;n++)r+=i[n][1];for(var s=Math.random()*r,a=0,o=t;a<o.length;a++){var c=o[a],l=c[0];if((s-=c[1])<0)return l}return t[t.length-1]},t.prototype.talentRandom=function(){return this.talent.talentRandom(JSON.parse(localStorage.extendTalent||"null"))},t.prototype.talentExtend=function(t){localStorage.extendTalent=JSON.stringify(t)},t.prototype.getRecord=function(){return this.property.getRecord()},t.prototype.getLastRecord=function(){return this.property.getLastRecord()},t.prototype.exclusive=function(t,e){return this.talent.exclusive(t,e)},t}();r.default=c,cc._RF.pop()},{"./Event":"Event","./Property":"Property","./Talent":"Talent"}],Property:[function(t,e,r){"use strict";cc._RF.push(e,"c99d9EGHExJPJxmwU1vrPAK","Property"),Object.defineProperty(r,"__esModule",{value:!0});var n=t("./Util"),i=function(){function t(){this.TYPES={AGE:"AGE",CHR:"CHR",INT:"INT",STR:"STR",MNY:"MNY",SPR:"SPR",LIF:"LIF",TLT:"TLT",EVT:"EVT"},this.classRecord=[]}return t.prototype.initial=function(t){var e=t.age;for(var r in this.ageData=e,e){var n=e[r],i=n.event,s=n.talent;Array.isArray(i)||(i=(null==i?void 0:i.split(","))||[]),i=i.map(function(t){var e=(""+t).split("*").map(function(t){return Number(t)});return 1==e.length&&e.push(1),e}),Array.isArray(s)||(s=(null==s?void 0:s.split(","))||[]),s=s.map(function(t){return Number(t)}),e[r]={event:i,talent:s}}},t.prototype.restart=function(t){var e;for(var r in this.data=((e={})[this.TYPES.AGE]=-1,e[this.TYPES.CHR]=0,e[this.TYPES.INT]=0,e[this.TYPES.STR]=0,e[this.TYPES.MNY]=0,e[this.TYPES.SPR]=0,e[this.TYPES.LIF]=1,e[this.TYPES.TLT]=[],e[this.TYPES.EVT]=[],e),t)this.change(r,t[r]);this.classRecord=[]},t.prototype.get=function(t){switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.LIF:case this.TYPES.TLT:case this.TYPES.EVT:return n.clone(this.data[t]);default:return 0}},t.prototype.set=function(t,e){switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.LIF:case this.TYPES.TLT:case this.TYPES.EVT:this.data[t]=n.clone(e);break;default:return 0}},t.prototype.record=function(){var t;this.classRecord.push(((t={})[this.TYPES.AGE]=this.get(this.TYPES.AGE),t[this.TYPES.CHR]=this.get(this.TYPES.CHR),t[this.TYPES.INT]=this.get(this.TYPES.INT),t[this.TYPES.STR]=this.get(this.TYPES.STR),t[this.TYPES.MNY]=this.get(this.TYPES.MNY),t[this.TYPES.SPR]=this.get(this.TYPES.SPR),t))},t.prototype.getRecord=function(){return n.clone(this.classRecord)},t.prototype.getLastRecord=function(){return n.clone(this.classRecord[this.classRecord.length-1])},t.prototype.change=function(t,e){if(Array.isArray(e))for(var r=0,n=e;r<n.length;r++){var i=n[r];this.change(t,Number(i))}else switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.LIF:this.data[t]+=Number(e);break;case this.TYPES.TLT:case this.TYPES.EVT:if(i=this.data[t],e<0){var s=i.indexOf(e);-1!=s&&i.splice(s,1)}i.includes(e)||i.push(e);break;default:return}},t.prototype.effect=function(t){for(var e in t)this.change(e,Number(t[e]))},t.prototype.isEnd=function(){return this.get(this.TYPES.LIF)<1},t.prototype.ageNext=function(){this.change(this.TYPES.AGE,1);var t=this.get(this.TYPES.AGE),e=this.getAgeData(t);return{age:t,event:e.event,talent:e.talent}},t.prototype.getAgeData=function(t){return n.clone(this.ageData[t])},t}();r.default=i,cc._RF.pop()},{"./Util":"Util"}],RestartEnum:[function(t,e,r){"use strict";cc._RF.push(e,"0b6e4LMw7pPVZW4W96A/8KG","RestartEnum"),Object.defineProperty(r,"__esModule",{value:!0}),r.RestartEnum=void 0,r.RestartEnum={EVENT_RESTARTGAME_ITEM_SELECT:"EVENT_RESTARTGAME_ITEM_SELECT",EVENT_RESTARTGAME_GAME:"EVENT_RESTARTGAME_GAME",EVENT_RESTARTGAME_AGAINGAME:"EVENT_RESTARTGAME_AGAINGAME"},cc._RF.pop()},{}],RestartGamePlay:[function(t,e,r){"use strict";cc._RF.push(e,"b23a84/k6FJn6SQEcP1hd1C","RestartGamePlay");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function a(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return c([t,e])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(o){s=[6,o],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=t("../../script/frameworks/EventMgr"),l=t("../../script/frameworks/Global"),u=t("../../script/frameworks/LoadMgr"),h=t("../../script/frameworks/SuperPanel"),p=t("../../script/frameworks/Utils"),f=t("./RestartEnum"),d=t("./RestartMgr"),g=t("./YearItem"),y=cc._decorator,m=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.yearItemPref=null,e.allItemList=[],e.scroll=null,e.autoState=!1,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.createItem()},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.tools.visible("endBtn",!1),this.tools.visible("autoBtn",!0)},e.prototype.onMessageEvent=function(){t.prototype.onMessageEvent.call(this),this.view.scrollView.on("click",this.createItem,this),this.view.touchArea.on("click",this.createItem,this),this.view.endBtn.on("click",this.clickEndBtn,this),this.view.autoBtn.on("click",this.clickAutoBtn,this)},e.prototype.offMessageEvent=function(){t.prototype.offMessageEvent.call(this),this.view.scrollView.off("click",this.createItem,this),this.view.touchArea.off("click",this.createItem,this),this.view.endBtn.off("click",this.clickEndBtn,this),this.view.autoBtn.on("click",this.clickAutoBtn,this)},e.prototype.createItem=function(){return a(this,void 0,void 0,function(){var t,e,r,n,i;return o(this,function(s){switch(s.label){case 0:return(t=d.RestartMgr.instance.getInfoByAge())?this.yearItemPref?[3,2]:(e=l.Global.restartGameBundle,r=this,[4,u.LoadMgr.instance.loadBundleRes(e,"res/prefabs/yearItem")]):(this.tools.visible("endBtn",!0),this.tools.visible("autoBtn",!1),this.autoState=!1,[2]);case 1:r.yearItemPref=s.sent(),s.label=2;case 2:return n=cc.instantiate(this.yearItemPref),i=n.getComponent(g.default),this.view.content.addChild(n),i.init(t),this.allItemList.push(i,n,t),d.RestartMgr.instance.curAge++,this.updateUI(t.data),this.view.scrollView.height<this.view.content.height&&this.scrollToBtm(),[2]}})})},e.prototype.scrollToBtm=function(){this.scroll||(this.scroll=this.view.scrollView.getComponent(cc.ScrollView)),this.scroll.scrollToBottom()},e.prototype.updateUI=function(t){var e=t[t.length-1],r=(e.AGE,e.CHR),n=e.INT,i=e.MNY,s=e.SPR,a=e.STR;this.tools.text("lab_0","\u989c\u503c:"+r),this.tools.text("lab_1","\u667a\u529b:"+n),this.tools.text("lab_2","\u4f53\u8d28:"+i),this.tools.text("lab_3","\u5bb6\u5883:"+s),this.tools.text("lab_4","\u5feb\u4e50:"+a)},e.prototype.onDestroy=function(){this.allItemList=[],t.prototype.onDestroy.call(this)},e.prototype.clickEndBtn=function(){c.EventMgr.dispatchEvent(f.RestartEnum.EVENT_RESTARTGAME_GAME,3),this.destroyPrefab()},e.prototype.clickAutoBtn=function(){this.autoState=!this.autoState,this.autoState&&this.auto()},e.prototype.auto=function(){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.autoState?(this.createItem(),[4,p.Utils.timeOut(this,.3)]):[2];case 1:return t.sent(),this.auto(),[2]}})})},s([m],e)}(h.default));r.default=v,cc._RF.pop()},{"../../script/frameworks/EventMgr":void 0,"../../script/frameworks/Global":void 0,"../../script/frameworks/LoadMgr":void 0,"../../script/frameworks/SuperPanel":void 0,"../../script/frameworks/Utils":void 0,"./RestartEnum":"RestartEnum","./RestartMgr":"RestartMgr","./YearItem":"YearItem"}],RestartGame:[function(t,e,r){"use strict";cc._RF.push(e,"3e4dagMr1xOJ5AzsLyPJcpd","RestartGame");var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function a(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return c([t,e])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(o){s=[6,o],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RestartGame=void 0;var s=t("../../script/frameworks/Global"),a=t("../../script/frameworks/LoadMgr"),o=t("./RestartMgr"),c=t("./core/Life"),l=function(){function t(){this.life=null}return t.prototype.init=function(){return n(this,void 0,void 0,function(){var t,e,r,n;return i(this,function(i){switch(i.label){case 0:return o.RestartMgr.instance.age?[3,2]:(t=o.RestartMgr.instance,[4,a.LoadMgr.instance.loadBundleRes(s.Global.restartGameBundle,"res/json/age",cc.JsonAsset)]);case 1:t.age=i.sent(),o.RestartMgr.instance.age.addRef(),i.label=2;case 2:return o.RestartMgr.instance.talents?[3,4]:(e=o.RestartMgr.instance,[4,a.LoadMgr.instance.loadBundleRes(s.Global.restartGameBundle,"res/json/talents",cc.JsonAsset)]);case 3:e.talents=i.sent(),o.RestartMgr.instance.talents.addRef(),i.label=4;case 4:return o.RestartMgr.instance.events?[3,6]:(r=o.RestartMgr.instance,[4,a.LoadMgr.instance.loadBundleRes(s.Global.restartGameBundle,"res/json/events",cc.JsonAsset)]);case 5:r.events=i.sent(),o.RestartMgr.instance.events.addRef(),i.label=6;case 6:return this.life=new c.default,n={age:o.RestartMgr.instance.age.json,talents:o.RestartMgr.instance.talents.json,events:o.RestartMgr.instance.events.json},[4,this.life.initial(n)];case 7:return i.sent(),[2]}})})},t.prototype.getLife=function(){return this.life},t.prototype.startGame=function(){return n(this,void 0,void 0,function(){var t,e,r,n;return i(this,function(){this.life.restart({CHR:o.RestartMgr.instance.chr,INT:o.RestartMgr.instance.int,STR:o.RestartMgr.instance.str,MNY:o.RestartMgr.instance.mny,SPR:o.RestartMgr.instance.spr,TLT:o.RestartMgr.instance.getTalentIdList()}),t=[];do{try{e=this.life.next()}catch(i){throw console.error(i),i}t.push(t),r=e.age,n=e.content,o.RestartMgr.instance.curTimeList.push({age:r,content:n,data:this.life.getRecord()})}while(!e.isEnd);return o.RestartMgr.instance.getRecord(),[2]})})},t.prototype.destroy=function(){o.RestartMgr.instance.age.decRef(),o.RestartMgr.instance.talents.decRef(),o.RestartMgr.instance.events.decRef(),cc.assetManager.releaseAsset(o.RestartMgr.instance.age),cc.assetManager.releaseAsset(o.RestartMgr.instance.talents),cc.assetManager.releaseAsset(o.RestartMgr.instance.events),o.RestartMgr.instance.age=null,o.RestartMgr.instance.talents=null,o.RestartMgr.instance.events=null},t}();r.RestartGame=l,cc._RF.pop()},{"../../script/frameworks/Global":void 0,"../../script/frameworks/LoadMgr":void 0,"./RestartMgr":"RestartMgr","./core/Life":"Life"}],RestartMgr:[function(t,e,r){"use strict";cc._RF.push(e,"a9cd62d7qdKiLnDb1o69zK8","RestartMgr"),Object.defineProperty(r,"__esModule",{value:!0}),r.RestartMgr=void 0;var n=function(){function t(){this.age=null,this.talents=null,this.events=null,this.selectList={},this.restartGame=null,this.chr=0,this.int=0,this.str=0,this.mny=0,this.spr=5,this.allAttribute=20,this.curTimeList=[],this.curAge=0,this.summarizeData=null,this.itemIdx=0}return Object.defineProperty(t,"instance",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.selectInit(),this.restartGame=null,this.summarizeData=null},t.prototype.selectInit=function(){this.selectList={},this.chr=0,this.int=0,this.str=0,this.mny=0,this.spr=5,this.curTimeList=[],this.curAge=0,this.allAttribute=20,this.itemIdx=0},t.prototype.cleatSelect=function(){this.selectList={}},t.prototype.pushList=function(t,e){this.selectList[t]||(this.selectList[t]=e)},t.prototype.delList=function(t){this.selectList[t]&&delete this.selectList[t]},t.prototype.getSelectLen=function(){return Object.keys(this.selectList).length},t.prototype.randomAllocation=function(){var t=this.generateRandomNumbers(this.allAttribute);this.chr=t[0],this.int=t[1],this.str=t[2],this.mny=t[3],this.allAttribute=0},t.prototype.getTalentIdList=function(){return Object.keys(this.selectList)},t.prototype.getInfoByAge=function(){if(this.itemIdx>=this.curTimeList.length)return null;var t=this.curTimeList[this.itemIdx];return this.itemIdx++,t},t.prototype.updateAttribute=function(){var t=this;Object.keys(this.selectList).forEach(function(e){var r,n,i=null===(n=null===(r=t.talents)||void 0===r?void 0:r.json[e])||void 0===n?void 0:n.status;i&&(t.allAttribute+=i)}),this.allAttribute<=0&&(this.allAttribute=20),console.log("status",this.allAttribute)},t.prototype.generateRandomNumbers=function(t){void 0===t&&(t=20);for(var e=[],r=0;r<3;r++){var n=Math.floor(11*Math.random());e.push(n)}var i=t-e.reduce(function(t,e){return t+e},0);return i>=0&&i<=10?(e.push(i),e):this.generateRandomNumbers(t)},t.prototype.getRecord=function(){if(!this.summarizeData){var t=this.curTimeList[this.curTimeList.length-1].data,e=t[t.length-1];this.summarizeData=this.deepClone(e)}},t.prototype.deepClone=function(t){var e=this;if("object"==typeof t&&"null"!==t){var r=Array.isArray(t)?[]:{};return Object.keys(t).forEach(function(n){r[n]=e.deepClone(t[n])}),r}return t},t._ins=null,t}();r.RestartMgr=n,cc._RF.pop()},{}],Restart:[function(t,e,r){"use strict";cc._RF.push(e,"2a32ad3uJFLKrM5t6Oj+HvO","Restart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function a(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return c([t,e])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(o){s=[6,o],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=t("../../script/common/CommonDecorator"),l=t("../../script/frameworks/EventMgr"),u=t("../../script/frameworks/Global"),h=t("../../script/frameworks/LoadMgr"),p=t("../../script/frameworks/SuperPanel"),f=t("../../script/frameworks/UIMgr"),d=t("../../script/manager/ReportMgr"),g=t("../../script/sdk/Sdk"),y=t("./DrawCardItem"),m=t("./RestartEnum"),v=t("./RestartGame"),R=t("./RestartMgr"),b=cc._decorator,M=b.ccclass,E=(b.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawCardItemList=[],e.talentList=[],e.openState=!0,e}return i(e,t),e.prototype.start=function(){return a(this,void 0,Promise,function(){return o(this,function(){return R.RestartMgr.instance.init(),R.RestartMgr.instance.restartGame=new v.RestartGame,R.RestartMgr.instance.restartGame.init(),this.initUI(),d.ReportMgr.instance.report("game_cs"),[2]})})},e.prototype.init=function(e){t.prototype.init.call(this,e)},e.prototype.game=function(){R.RestartMgr.instance.selectInit(),this.initUI()},e.prototype.initUI=function(){this.tools.visible("homePage",!0),this.tools.visible("drawCard",!1)},e.prototype.onMessageEvent=function(){t.prototype.onMessageEvent.call(this),this.view.clickDrawCard.on("click",this.clickDrawCard,this),this.view.backHome.on("click",this.clickBackHome,this),this.view.cardBtn.on("click",this.clickCardBtn,this),this.view.startBtn.on("click",this.clickGameStartBtn,this),this.view.changeBtn.on("click",this.clickChangeBtn,this),l.EventMgr.on(m.RestartEnum.EVENT_RESTARTGAME_GAME,this.addToLayer,this),l.EventMgr.on(m.RestartEnum.EVENT_RESTARTGAME_AGAINGAME,this.game,this)},e.prototype.offMessageEvent=function(){t.prototype.offMessageEvent.call(this),this.view.clickDrawCard.off("click",this.clickDrawCard,this),this.view.backHome.off("click",this.clickBackHome,this),this.view.cardBtn.off("click",this.clickCardBtn,this),this.view.startBtn.off("click",this.clickGameStartBtn,this),this.view.changeBtn.off("click",this.clickChangeBtn,this),l.EventMgr.off(m.RestartEnum.EVENT_RESTARTGAME_GAME,this.addToLayer,this),l.EventMgr.off(m.RestartEnum.EVENT_RESTARTGAME_AGAINGAME,this.game,this)},e.prototype.clickDrawCard=function(){this.tools.visible("homePage",!1),this.tools.visible("drawCard",!0),this.tools.visible("cardBtn",!0),this.tools.visible("startBtn",!1),this.tools.visible("changeBtn",!1),this.tools.visible("drawScrollView",!1)},e.prototype.clickBackHome=function(){this.destroyPrefab()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),R.RestartMgr.instance.restartGame.destroy(),R.RestartMgr.instance.restartGame=null},e.prototype.clickGameStartBtn=function(){R.RestartMgr.instance.getSelectLen()<3?f.UIMgr.instance.tips("\u8bf7\u9009\u62e93\u4e2a"):(this.tools.visible("drawCard",!1),this.view.drawScrollContent.removeAllChildren(),this.addToLayer(1))},e.prototype.clickCardBtn=function(){this.tools.visible("cardBtn",!1),this.tools.visible("startBtn",!0),this.tools.visible("changeBtn",!0),this.createCardItem()},e.prototype.createCardItem=function(){return a(this,void 0,void 0,function(){var t,e,r,n,i;return o(this,function(s){switch(s.label){case 0:return this.tools.visible("drawScrollView",!0),this.talentList=R.RestartMgr.instance.restartGame.getLife().talentRandom(),this.drawCardItemList=[],t=u.Global.restartGameBundle,[4,h.LoadMgr.instance.loadBundleRes(t,"res/prefabs/drawCardItem")];case 1:for(e=s.sent(),r=0;r<this.talentList.length;r++)n=cc.instantiate(e),this.view.drawScrollContent.addChild(n),(i=n.getComponent(y.default)).init(this.talentList[r]),this.drawCardItemList.push({node:n,script:i});return[2]}})})},e.prototype.addToLayer=function(t,e){return void 0===e&&(e=null),a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:if(!this.openState)return[2];switch(this.openState=!1,t){case 1:return[3,1];case 2:return[3,3];case 3:return[3,5]}return[3,7];case 1:return[4,this.addPref("characterAttribute","CharacterAttribute",e)];case 2:return r.sent(),[3,8];case 3:return[4,R.RestartMgr.instance.restartGame.startGame()];case 4:return r.sent(),this.addPref("restartGamePlay","RestartGamePlay",e),[3,8];case 5:return[4,this.addPref("summarize","Summarize",e)];case 6:return r.sent(),[3,8];case 7:return[3,8];case 8:return this.openState=!0,[2]}})})},e.prototype.addPref=function(t,e,r){return a(this,void 0,void 0,function(){var n,i,s,a;return o(this,function(o){switch(o.label){case 0:return n=u.Global.restartGameBundle,i="res/prefabs/"+t,[4,h.LoadMgr.instance.loadBundleRes(n,i)];case 1:return s=o.sent(),a=cc.instantiate(s),this.view.layer.addChild(a),a.getComponent(e).init(r),[2]}})})},e.prototype.clickChangeBtn=function(){var t=this;g.Sdk.showVideo(function(){t.drawCardItemList.forEach(function(t){var e;cc.isValid(null==t?void 0:t.node)&&(null===(e=null==t?void 0:t.node)||void 0===e||e.destroy())}),d.ReportMgr.instance.report("video_cs"),t.view.drawScrollContent.removeAllChildren(),R.RestartMgr.instance.cleatSelect(),t.drawCardItemList=[],t.createCardItem()})},s([c.throttle(1e3)],e.prototype,"clickCardBtn",null),s([M],e)}(p.default));r.default=E,cc._RF.pop()},{"../../script/common/CommonDecorator":void 0,"../../script/frameworks/EventMgr":void 0,"../../script/frameworks/Global":void 0,"../../script/frameworks/LoadMgr":void 0,"../../script/frameworks/SuperPanel":void 0,"../../script/frameworks/UIMgr":void 0,"../../script/manager/ReportMgr":void 0,"../../script/sdk/Sdk":void 0,"./DrawCardItem":"DrawCardItem","./RestartEnum":"RestartEnum","./RestartGame":"RestartGame","./RestartMgr":"RestartMgr"}],SummarizeItem:[function(t,e,r){"use strict";cc._RF.push(e,"0a906H2VqBMqbpzt1EmA8gS","SummarizeItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../script/frameworks/BasePanel"),o=t("./core/Summary"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.updateUI()},e.prototype.updateUI=function(){this.tools.visible("orange",!1),this.tools.visible("blue",!1),this.tools.visible("purple",!1);var t=this.myData,e=t.title,r=t.info,n=t.key,i=o.summary(n,r),s=i.judge,a=i.grade;this.tools.text("lab_0",e),this.tools.text("lab_1",String(r)+" "+String(s)),console.log("====",a),this.tools.visible("blue",1==a),this.tools.visible("orange",2==a),this.tools.visible("purple",3==a)},s([l],e)}(a.BasePanel));r.default=u,cc._RF.pop()},{"../../script/frameworks/BasePanel":void 0,"./core/Summary":"Summary"}],Summarize:[function(t,e,r){"use strict";cc._RF.push(e,"5a36fT/E7RCuY3r10Ah7iEu","Summarize");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function a(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return c([t,e])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(o){s=[6,o],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=t("../../script/frameworks/EventMgr"),l=t("../../script/frameworks/Global"),u=t("../../script/frameworks/LoadMgr"),h=t("../../script/frameworks/SuperPanel"),p=t("./RestartEnum"),f=t("./RestartMgr"),d=t("./SummarizeItem"),g=cc._decorator,y=g.ccclass,m=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPref=null,e.allItemList=[],e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),f.RestartMgr.instance.getRecord(),this.getSum(),this.createAllItem()},e.prototype.onMessageEvent=function(){t.prototype.onMessageEvent.call(this),this.view.goBtn.on("click",this.clickAgain,this)},e.prototype.offMessageEvent=function(){t.prototype.offMessageEvent.call(this),this.view.goBtn.on("click",this.clickAgain,this)},e.prototype.createAllItem=function(){return a(this,void 0,void 0,function(){var t,e,r,n,i,s,a,c;return o(this,function(o){switch(o.label){case 0:t=["\u989c\u503c\uff1a","\u667a\u529b\uff1a","\u4f53\u8d28\uff1a","\u5bb6\u5883\uff1a","\u5feb\u4e50\uff1a","\u4eab\u5e74\uff1a","\u603b\u8bc4\uff1a"],e=["CHR","INT","STR","MNY","SPR","AGE","SUM"],r=0,o.label=1;case 1:return r<7?this.itemPref?[3,3]:(n=l.Global.restartGameBundle,i=this,[4,u.LoadMgr.instance.loadBundleRes(n,"res/prefabs/summarizeItem")]):[3,5];case 2:i.itemPref=o.sent(),o.label=3;case 3:s=cc.instantiate(this.itemPref),this.view.content.addChild(s),a=s.getComponent(d.default),c=f.RestartMgr.instance.summarizeData[e[r]],a.init({title:t[r],info:c,key:e[r]}),this.allItemList.push(a,s,c),o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})},e.prototype.getSum=function(){var t=f.RestartMgr.instance.summarizeData,e=Math.floor(2*this.sum(t.CHR,t.INT,t.STR,t.MNY,t.SPR)+t.AGE/2);f.RestartMgr.instance.summarizeData.SUM=e},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),f.RestartMgr.instance.summarizeData=null},e.prototype.clickAgain=function(){this.destroyPrefab(),c.EventMgr.dispatchEvent(p.RestartEnum.EVENT_RESTARTGAME_AGAINGAME)},e.prototype.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.flat())},e.prototype.sum=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=0;return t.flat().forEach(function(t){return r+=t}),r},s([y],e)}(h.default));r.default=m,cc._RF.pop()},{"../../script/frameworks/EventMgr":void 0,"../../script/frameworks/Global":void 0,"../../script/frameworks/LoadMgr":void 0,"../../script/frameworks/SuperPanel":void 0,"./RestartEnum":"RestartEnum","./RestartMgr":"RestartMgr","./SummarizeItem":"SummarizeItem"}],Summary:[function(t,e,r){"use strict";cc._RF.push(e,"d2ca6clKlBLlrymxEML8mJj","Summary"),Object.defineProperty(r,"__esModule",{value:!0}),r.summary=void 0;var n={CHR:[{judge:"\u5730\u72f1",grade:0},{min:1,judge:"\u6298\u78e8",grade:0},{min:2,judge:"\u4e0d\u4f73",grade:0},{min:4,judge:"\u666e\u901a",grade:0},{min:7,judge:"\u4f18\u79c0",grade:1},{min:9,judge:"\u7f55\u89c1",grade:2},{min:11,judge:"\u9006\u5929",grade:3}],MNY:[{judge:"\u5730\u72f1",grade:0},{min:1,judge:"\u6298\u78e8",grade:0},{min:2,judge:"\u4e0d\u4f73",grade:0},{min:4,judge:"\u666e\u901a",grade:0},{min:7,judge:"\u4f18\u79c0",grade:1},{min:9,judge:"\u7f55\u89c1",grade:2},{min:11,judge:"\u9006\u5929",grade:3}],SPR:[{judge:"\u5730\u72f1",grade:0},{min:1,judge:"\u6298\u78e8",grade:0},{min:2,judge:"\u4e0d\u5e78",grade:0},{min:4,judge:"\u666e\u901a",grade:0},{min:7,judge:"\u5e78\u798f",grade:1},{min:9,judge:"\u6781\u4e50",grade:2},{min:11,judge:"\u5929\u547d",grade:3}],INT:[{judge:"\u5730\u72f1",grade:0},{min:1,judge:"\u6298\u78e8",grade:0},{min:2,judge:"\u4e0d\u4f73",grade:0},{min:4,judge:"\u666e\u901a",grade:0},{min:7,judge:"\u4f18\u79c0",grade:1},{min:9,judge:"\u7f55\u89c1",grade:2},{min:11,judge:"\u9006\u5929",grade:3},{min:21,judge:"\u8bc6\u6d77",grade:3},{min:131,judge:"\u5143\u795e",grade:3},{min:501,judge:"\u4ed9\u9b42",grade:3}],STR:[{judge:"\u5730\u72f1",grade:0},{min:1,judge:"\u6298\u78e8",grade:0},{min:2,judge:"\u4e0d\u4f73",grade:0},{min:4,judge:"\u666e\u901a",grade:0},{min:7,judge:"\u4f18\u79c0",grade:1},{min:9,judge:"\u7f55\u89c1",grade:2},{min:11,judge:"\u9006\u5929",grade:3},{min:21,judge:"\u51dd\u6c14",grade:3},{min:101,judge:"\u7b51\u57fa",grade:3},{min:401,judge:"\u91d1\u4e39",grade:3},{min:1001,judge:"\u5143\u5a74",grade:3},{min:2001,judge:"\u4ed9\u4f53",grade:3}],AGE:[{judge:"\u80ce\u6b7b\u8179\u4e2d",grade:0},{min:1,judge:"\u65e9\u592d",grade:0},{min:10,judge:"\u5c11\u5e74",grade:0},{min:18,judge:"\u76db\u5e74",grade:0},{min:40,judge:"\u4e2d\u5e74",grade:0},{min:60,judge:"\u82b1\u7532",grade:1},{min:70,judge:"\u53e4\u7a00",grade:1},{min:80,judge:"\u6756\u671d",grade:2},{min:90,judge:"\u5357\u5c71",grade:2},{min:95,judge:"\u4e0d\u8001",grade:3},{min:100,judge:"\u4fee\u4ed9",grade:3},{min:500,judge:"\u4ed9\u5bff",grade:3}],SUM:[{judge:"\u5730\u72f1",grade:0},{min:41,judge:"\u6298\u78e8",grade:0},{min:50,judge:"\u4e0d\u4f73",grade:0},{min:60,judge:"\u666e\u901a",grade:0},{min:80,judge:"\u4f18\u79c0",grade:1},{min:100,judge:"\u7f55\u89c1",grade:2},{min:110,judge:"\u9006\u5929",grade:3},{min:120,judge:"\u4f20\u8bf4",grade:3}]};r.summary=function(t,e){for(var r=n[t].length;r--;){var i=n[t][r],s=i.min,a=i.judge,o=i.grade;if(null==s||e>=s)return{judge:a,grade:o}}},cc._RF.pop()},{}],Talent:[function(t,e,r){"use strict";cc._RF.push(e,"c74af/XH2BCK6aBVNYIcC4j","Talent"),Object.defineProperty(r,"__esModule",{value:!0});var n=t("./Util"),i=t("./Condition"),s=function(){function t(){}return t.prototype.initial=function(t){var e=t.talents;for(var r in this.talents=e,e){var n=e[r];n.id=Number(r),n.grade=Number(n.grade)}},t.prototype.check=function(t,e){var r=this.get(t).condition;return i.checkCondition(e,r)},t.prototype.get=function(t){var e=this.talents[t];if(!e)throw new Error("[ERROR] No Talent["+t+"]");return n.clone(e)},t.prototype.information=function(t){var e=this.get(t);return{grade:e.grade,name:e.name,description:e.description}},t.prototype.exclusive=function(t,e){var r=this.get(e).exclusive;if(!r)return null;for(var n=0,i=t;n<i.length;n++)for(var s=i[n],a=0,o=r;a<o.length;a++)if(s==o[a])return s;return null},t.prototype.talentRandom=function(t){var e={};for(var r in this.talents){var n=this.talents[r],i=n.id,s=n.grade,a=n.name,o=n.description;i!=t?e[s]?e[s].push({grade:s,name:a,description:o,id:i}):e[s]=[{grade:s,name:a,description:o,id:i}]:t={grade:s,name:a,description:o,id:i}}return new Array(10).fill(1).map(function(r,n){if(!n&&t)return t;var i,s=Math.random();for(i=s>=.111?0:s>=.011?1:s>=.001?2:3;0==e[i].length;)i--;var a=e[i].length,o=Math.floor(Math.random()*a)%a;return e[i].splice(o,1)[0]})},t.prototype.allocationAddition=function(t){if(Array.isArray(t)){for(var e=0,r=0,n=t;r<n.length;r++){var i=n[r];e+=this.allocationAddition(i)}return e}return Number(this.get(t).status)||0},t.prototype.do=function(t,e){var r=this.get(t),n=r.effect,s=r.condition,a=r.grade,o=r.name,c=r.description;return s&&!i.checkCondition(e,s)?null:{effect:n,grade:a,name:o,description:c}},t}();r.default=s,cc._RF.pop()},{"./Condition":"Condition","./Util":"Util"}],Util:[function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=0;return t.flat().forEach(function(t){return r+=t}),r}cc._RF.push(e,"7900fvIy7VDybyO3DHwuKBP","Util"),Object.defineProperty(r,"__esModule",{value:!0}),r.average=r.sum=r.min=r.max=r.clone=void 0,r.clone=function t(e){switch(typeof e){case"object":if(Array.isArray(e))return e.map(function(e){return t(e)});var r={};for(var n in e)r[n]=t(e[n]);return r;default:return e}},r.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.flat())},r.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.min.apply(Math,t.flat())},r.sum=n,r.average=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,t)/t.flat().length},cc._RF.pop()},{}],YearItem:[function(t,e,r){"use strict";cc._RF.push(e,"57e4boSj45IzJP18giSJNGz","YearItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../script/frameworks/BasePanel"),o=cc._decorator,c=o.ccclass,l=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curLayout=null,e.parentLayout=null,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.updateUI()},e.prototype.updateUI=function(){var t=this.myData.content.reduce(function(t,e){return t+(""==t?"":"\n")+e.description},"");this.tools.text("text",this.myData.age+"\u5c81 "+t),this.curLayout||(this.curLayout=this.node.getComponent(cc.Layout)),this.curLayout.updateLayout(),this.parentLayout||(this.parentLayout=this.node.parent.getComponent(cc.Layout)),this.parentLayout.updateLayout()},s([c],e)}(a.BasePanel));r.default=l,cc._RF.pop()},{"../../script/frameworks/BasePanel":void 0}]},{},["CharacterAttribute","DrawCardItem","Restart","RestartEnum","RestartGame","RestartGamePlay","RestartMgr","Summarize","SummarizeItem","YearItem","Condition","Event","Life","Property","Summary","Talent","Util"]);