window.__require=function t(e,i,o){function a(c,s){if(!i[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var r="function"==typeof __require&&__require;if(!s&&r)return r(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return a(e[c][1][t]||t)},l,l.exports,t,e,i,o)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)a(o[c]);return a}({hx_AnimationManage:[function(t,e){"use strict";cc._RF.push(e,"d3e76wzbsRPqa1MLhTtBY37","hx_AnimationManage");var i={disappearQueueArr:[],disappearQueueIndex:0,disappearQueueState:!1,savaMyInterval:null,disappearQueueArr_1:[],disappearQueueIndex_1:0,disappearQueueState_1:!1,savaMyInterval_1:null,isPlayAction:!0,downMoveAnim:function(t,e,i,o,a){void 0===a&&(a=1),t.stopAllActions();var n,c=t.x,s=t.y,h=e.y-t.y,r=i;r=h<=0?h/-66*g_hx_actionTime.blockUpTime:h/66*g_hx_actionTime.blockUpTime,2==a?(r=Math.sqrt(Math.abs(h)/1e3/5),n=cc.moveTo(r,cc.v2(c,s+h+5))):n=cc.moveTo(r,cc.v2(c,s+h));var l=cc.callFunc(function(){2==a?this.blockBackElasticAction(t,function(){o&&o(r)}.bind(),1,null,r):o&&o(r)}.bind(this));t.runAction(cc.sequence(n,l))},blockBackElasticAction:function(t,e,i,o,a){void 0===i&&(i=-1),void 0===o&&(o=null),void 0===a&&(a=null);var n=cc.moveTo(g_hx_actionTime.blockElasticTime1,cc.v2(t.x,t.y+5)),c=cc.moveTo(g_hx_actionTime.blockElasticTime2,cc.v2(t.x,t.y-5)),s=null;-1!=i&&(s=cc.callFunc(function(){e&&e()}.bind(this)));var h=cc.sequence(n,c,s);t.runAction(h)},clearRosBlockAction:function(t){var e=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-15,t.y)),i=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+15,t.y)),o=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+15,t.y)),a=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-15,t.y)),n=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-12,t.y)),c=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+12,t.y)),s=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+12,t.y)),h=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-12,t.y)),r=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x-10,t.y)),l=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x+10,t.y)),u=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x+10,t.y)),_=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x,t.y)),m=cc.delayTime(g_hx_actionTime.blockClearWaitTime),d=cc.callFunc(function(){}.bind(this)),p=cc.delayTime(g_hx_actionTime.blockShakeWait),g=cc.sequence(p,e,i,o,a,n,c,s,h,r,l,u,_,m,d);t.runAction(g)},clearRosBlockAction_1:function(t){var e=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+15,t.y)),i=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-15,t.y)),o=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-15,t.y)),a=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+15,t.y)),n=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+12,t.y)),c=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-12,t.y)),s=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-12,t.y)),h=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+12,t.y)),r=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x+10,t.y)),l=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x-10,t.y)),u=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x-10,t.y)),_=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x,t.y)),m=cc.delayTime(g_hx_actionTime.blockClearWaitTime),d=cc.callFunc(function(){}.bind(this)),p=cc.delayTime(g_hx_actionTime.blockShakeWait),g=cc.sequence(p,e,i,o,a,n,c,s,h,r,l,u,_,m,d);t.runAction(g)},propClearBlockAction:function(t,e,i){void 0===i&&(i=0);var o=0==i?cc.delayTime(0):cc.delayTime(g_hx_actionTime.PROP_BIRD_TIME),a=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+10,t.y)),n=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-10,t.y)),c=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x-10,t.y)),s=cc.moveTo(g_hx_actionTime.blockClearActionTime,cc.v2(t.x+10,t.y)),h=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+10,t.y)),r=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-10,t.y)),l=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x-10,t.y)),u=cc.moveTo(g_hx_actionTime.blockClearActionTime_1,cc.v2(t.x+10,t.y)),_=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x+10,t.y)),m=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x-10,t.y)),d=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x-10,t.y)),p=cc.moveTo(g_hx_actionTime.blockClearActionTime_2,cc.v2(t.x,t.y)),g=0==i?cc.delayTime(g_hx_actionTime.blockClearWaitTime):cc.delayTime(g_hx_actionTime.blockClearWaitTime1),y=cc.callFunc(function(){e&&e()}.bind(this)),x=cc.sequence(o,a,n,c,s,h,r,l,u,_,m,d,p,g,y);t.runAction(x)},levelUpAction:function(t,e){void 0===e&&(e=null),t.scaleX=0,t.scaleY=0,t.x=0,t.y=114,t.opacity=255;var i=cc.scaleTo(.08,1.3),o=cc.scaleTo(.06,.9),a=cc.scaleTo(.05,1.1),n=cc.scaleTo(.05,1),c=cc.moveTo(2,cc.v2(t.x,t.y+40)),s=cc.fadeTo(1.5,0),h=cc.delayTime(.5),r=cc.sequence(h,s),l=cc.spawn(c,r),u=cc.callFunc(function(){t.active=!1,e&&e()}.bind(this)),_=cc.sequence(i,o,a,n,l,u);t.runAction(_)},doubleHitAction:function(t){t.opacity=255;var e=cc.delayTime(1.5),i=cc.fadeTo(.5,0),o=cc.callFunc(function(){t.active=!1}.bind(this)),a=cc.sequence(e,i,o);t.runAction(a)},birdFlyAction:function(t,e,i,o,a){void 0===o&&(o=null),void 0===a&&(a=null);var n=cc.moveTo(g_hx_actionTime.PROP_BIRD_TIME,cc.v2(e.x,e.y-30)),c=(cc.moveTo(g_hx_actionTime.blockClearActionTime_1+g_hx_actionTime.blockClearActionTime_2,cc.v2(e.x+10,e.y-30)),cc.moveTo(g_hx_actionTime.blockClearActionTime_1+g_hx_actionTime.blockClearActionTime_2,cc.v2(e.x-10,e.y-30)),cc.moveTo(g_hx_actionTime.blockClearActionTime_1+g_hx_actionTime.blockClearActionTime_2,cc.v2(e.x-10,e.y-30)),cc.moveTo(g_hx_actionTime.blockClearActionTime_1+g_hx_actionTime.blockClearActionTime_2,cc.v2(e.x+10,e.y-30)),cc.delayTime(4*(g_hx_actionTime.blockClearActionTime_1+g_hx_actionTime.blockClearActionTime_2))),s=cc.delayTime(g_hx_actionTime.blockClearWait),h=cc.callFunc(function(){a&&a()}.bind(this)),r=cc.sequence(n,c,s,h),l=cc.delayTime(g_hx_actionTime.PROP_BIRD_TIME),u=cc.callFunc(function(){o&&o()}.bind(this)),_=cc.sequence(l,u),m=cc.spawn(r,_);t.runAction(m)},blockBeEatAction:function(t,e,i,o){this.disappearQueueArr.push({node:t,length:e,cb:i,cbFun:o}),0==this.disappearQueueState&&(this.disappearQueueState=!0,this.disappearLoopAnim())},disappearLoopAnim:function(){this.savaMyInterval=setInterval(function(){var t=this.disappearQueueArr[this.disappearQueueIndex];if(null!=t&&null!=t){this.disappearQueueIndex++;var e=cc.moveTo(g_hx_actionTime.BLOCK_MOVE_MOUTH,cc.v2(0-33*(t.length-1),345)),i=cc.callFunc(function(){t.cb&&t.cb(),this.disappearQueueIndex>=this.disappearQueueArr.length&&(this.disappearQueueState=!1,t.cbFun&&t.cbFun(),this.clearMyInterval())}.bind(this));t.node.runAction(cc.sequence(e,i))}}.bind(this),g_hx_actionTime.QUEUE_INTERVAL_TIME)},clearMyInterval:function(){clearInterval(this.savaMyInterval),this.savaMyInterval=null,this.disappearQueueArr=[],this.disappearQueueIndex=0},guideAction:function(t,e,i,o,a,n){n&&n.stopAllActions(),n.active=!0;var c=cc.moveTo(t,o,a),s=cc.delayTime(.6),h=cc.callFunc(function(){n.active=!1,n.x=e,n.y=i}.bind(this));n.runAction(cc.repeatForever(cc.sequence(c,s,h)))},startAnim:function(t,e,i,o,a){if(void 0===o&&(o=.1),void 0===a&&(a=null),t){t.active=!0,t.x=e.x,t.y=e.y;var n=cc.moveTo(o,cc.v2(i.x,i.y)),c=cc.delayTime(.8),s=cc.callFunc(function(){t.active=!1,a&&a()}.bind(this)),h=cc.sequence(n,c,s);t.runAction(h)}},startLabelAnim:function(t,e,i){if(void 0===e&&(e=.2),t){t.scaleX=0,t.scaleY=0,t.opacity=255,t.active=!0;var o=cc.scaleTo(e,1,1),a=cc.delayTime(.6),n=cc.fadeTo(1,0),c=cc.callFunc(function(){t.active=!1}.bind(this)),s=cc.sequence(o,a,n,c),h=cc.delayTime(1.4),r=cc.callFunc(function(){i&&i()}.bind(this)),l=cc.sequence(h,r);t.runAction(cc.spawn(s,l))}},queuePlay:function(t,e){this.disappearQueueIndex_1=0,this.disappearQueueArr_1=[],this.disappearQueueArr_1=e,0==this.disappearQueueState_1&&(this.disappearQueueState_1,this.isPlayAction=!0,this.queuePlayAnim(t))},queuePlayAnim:function(t,e){void 0===e&&(e=0);var i,o=this.isSingleDrop();i=o?0:.05,this.disappearQueueIndex_1++,g_hx_CommonFunc.useRunActionDelayed(t,e,function(){for(var e in this.disappearQueueArr_1[this.disappearQueueIndex_1-1])this.disappearQueueArr_1[this.disappearQueueIndex_1-1].hasOwnProperty(e)&&this.downMoveAnim(this.disappearQueueArr_1[this.disappearQueueIndex_1-1][e].node,this.disappearQueueArr_1[this.disappearQueueIndex_1-1][e].script.moveTargetPos,this.disappearQueueArr_1[this.disappearQueueIndex_1-1][e].time,function(){this.isPlayAction&&(this.isPlayAction=!1,g_hx_CommonFunc.useRunActionDelayed(t,i*this.disappearQueueArr_1.length,function(){g_hx_gameState.myGameState=g_hx_gameState.playClearFullBlocks}))}.bind(this),2);this.disappearQueueIndex_1>=this.disappearQueueArr_1.length||this.queuePlayAnim(t,i)}.bind(this))},isSingleDrop:function(){for(var t=!1,e=0;e<this.disappearQueueArr_1.length;e++)t=1==this.disappearQueueArr_1[e].length;return t}};e.exports=i,cc._RF.pop()},{}],hx_BgCloud:[function(t,e){"use strict";cc._RF.push(e,"8e9deY0Hh9E5KGvzth7CEPp","hx_BgCloud"),cc.Class({extends:cc.Component,properties:{cloudPref:cc.Prefab,starBling:cc.Prefab,holdMyStar:null},onInit:function(){this.createCloud(g_hx_cloudData.cloudType_1),this.createCloud(g_hx_cloudData.cloudType_2),this.createCloud(g_hx_cloudData.cloudType_3),this.createCloud(g_hx_cloudData.cloudType_4),this.createCloud(g_hx_cloudData.cloudType_5),this.createCloud(g_hx_cloudData.cloudType_6),this.createCloud(g_hx_cloudData.cloudType_7),this.createStarBling(),this.holdMyStar&&this.onInitAction(),this.starShowHide(!0),this.playStarDragonBones()},createCloud:function(t){var e=t.cloudType,i=t.moveSpeed,o=t.startPosX,a=t.endPosX,n=t.posY,c=cc.instantiate(this.cloudPref),s=t.wait;c.getComponent("hx_cloud").onInit(e,i,o,a,n,s),c.x=o,c.y=n,this.node&&this.node.addChild(c)},createStarBling:function(){var t=cc.instantiate(this.starBling);this.holdMyStar=t,this.node.addChild(t),this.setStarPos(0,0),this.starShowHide(!1)},starShowHide:function(t){this.holdMyStar&&(this.holdMyStar.active=t)},setStarPos:function(t,e){this.holdMyStar&&(this.holdMyStar.x=t,this.holdMyStar.y=e)},onInitAction:function(){null!=this._armatureDisPlay_1&&null!=this._armature_1||(this._armatureDisPlay_1=this.holdMyStar.getComponent(dragonBones.ArmatureDisplay),this._armature_1=this._armatureDisPlay_1.armature())},playStarDragonBones:function(){g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay_1,"ZYX_xingxingshan",0)}}),cc._RF.pop()},{}],hx_CommonData:[function(t,e){"use strict";cc._RF.push(e,"5d4f0fH2c9IqbzosMKzUuVt","hx_CommonData"),e.exports={touchInfo:null,musicCtrl:!0,singlePointStartTouch:!1},cc._RF.pop()},{}],hx_CommonFunc:[function(t,e){"use strict";cc._RF.push(e,"2a6a57ZHx1MsrmZMTlqNdMH","hx_CommonFunc");var i={nextAppearBlockData:null,UpsetArray:function(t){return t.sort(function(){return.5-Math.random()}),t},getArrMaxValue:function(t){return t.sort(function(t,e){return t-e}),t[t.length-1]},createBlockNum:function(){var t=Math.floor(4*Math.random())+5;return g_hx_gameData.level<=6&&(t=Math.floor(3*Math.random())+6),t},getBlockRowsData:function(){var t=[];switch(this.createBlockNum()){case 5:t=this.getArrData(g_hx_RowsData.blockRowsData_5);break;case 6:t=this.getArrData(g_hx_RowsData.blockRowsData_6);break;case 7:t=this.getArrData(g_hx_RowsData.blockRowsData_7);break;case 8:t=this.getArrData(g_hx_RowsData.blockRowsData_8);break;default:t=[1,1,0,2,2,0,1]}return this.UpsetArray(t)},getBlockRowsData_1:function(){var t=[];switch(this.createBlockNum()){case 5:t=this.getArrData(g_hx_RowsData_1.blockRowsData_5);break;case 6:t=this.getArrData(g_hx_RowsData_1.blockRowsData_6);break;case 7:t=this.getArrData(g_hx_RowsData_1.blockRowsData_7);break;case 8:t=this.getArrData(g_hx_RowsData_1.blockRowsData_8);break;default:t=[1,1,0,2,2,0,1]}return this.UpsetArray(t)},getAppearBlockData:function(){var t=null,e=null;return null==this.nextAppearBlockData?(t=this.levelDifficultyControl(),e=this.levelDifficultyControl(),this.nextAppearBlockData=e):(t=this.nextAppearBlockData,e=this.levelDifficultyControl(),this.nextAppearBlockData=e),null!=t&&null!=t&&""!=t||(t=g_hx_gameData.level<=3?this.getBlockRowsData_1():this.getBlockRowsData()),null!=this.nextAppearBlockData&&null!=this.nextAppearBlockData&&""!=this.nextAppearBlockData||(g_hx_gameData.level<=3?this.nextAppearBlockData=this.getBlockRowsData_1():this.nextAppearBlockData=this.getBlockRowsData()),{now:t,next:this.nextAppearBlockData}},levelDifficultyControl:function(){var t=this.getBlockRowsData(),e=t.concat(),i=this.getWordCnt(e),o=!1,a=!1,n=!1,c=!1;if(g_hx_gameData.level<=3?(o=this.judgeRightWrong(i,"1",0,6),a=this.judgeRightWrong(i,"2",0,3),n=this.judgeRightWrong(i,"3",0,2),c=this.levelOneJudgeRightWrong(i,"4",0)):g_hx_gameData.level>3&&g_hx_gameData.level<=6?(o=this.judgeRightWrong(i,"1",0,5),a=this.judgeRightWrong(i,"2",0,3),n=this.judgeRightWrong(i,"3",0,2),c=this.judgeRightWrong(i,"4",0,1)):g_hx_gameData.level>6&&g_hx_gameData.level<=9?(o=this.judgeRightWrong(i,"1",0,4),a=this.judgeRightWrong(i,"2",0,4),n=this.judgeRightWrong(i,"3",0,2),c=this.judgeRightWrong(i,"4",0,1)):g_hx_gameData.level>9&&g_hx_gameData.level<=13?(o=this.judgeRightWrong(i,"1",0,3),a=this.judgeRightWrong(i,"2",0,4),n=this.judgeRightWrong(i,"3",0,2),c=this.judgeRightWrong(i,"4",0,2)):(o=this.judgeRightWrong(i,"1",0,2),a=this.judgeRightWrong(i,"2",0,4),n=this.judgeRightWrong(i,"3",0,2),c=this.judgeRightWrong(i,"4",0,2)),1==o&&1==a&&1==n&&1==c)return t;this.levelDifficultyControl()},judgeRightWrong:function(t,e,i,o){return null==t[e]||null==t[e]||""==t[e]||t[e]>=i&&t[e]<=o},levelOneJudgeRightWrong:function(t,e,i){return null==t[e]||null==t[e]||""==t[e]||t[e]==i},getWordCnt:function(t){for(var e={},i=0,o=t.length;i<o;i++){var a=t[i];e[a]=e[a]+1||1}return e},getNextBlockData:function(){return this.nextAppearBlockData},getArrData:function(t){return t[Math.floor(Math.random()*t.length)].concat()},getScore:function(t,e,i){if(void 0===t&&(t=1),void 0===e&&(e=null),void 0===i&&(i=1),1==t){g_hx_gameData.score=g_hx_gameData.score+g_hx_gameData.level*i,g_hx_localData.setHistoryHighScore(g_hx_gameData.score);var o=this.getNowLevel(g_hx_gameData.score);g_hx_gameData.level!=o&&e&&e(o)}else g_hx_gameData.score=g_hx_gameData.score;g_hx_gameData.level=this.getNowLevel(g_hx_gameData.score)},getNowLevel:function(t){for(var e=g_hx_gameData.levelRangeArr,i=1,o=0;o<e.length;o++)if(t>=e[o][0]&&t<e[o][1])return o+1;return t>=e[e.length-1][1]&&(i=101),i},getLevelRange:function(){g_hx_gameData.levelRangeArr=[],g_hx_gameData.levelRangeArr=[[0,10],[10,50],[50,100],[100,200]];for(var t=200,e=[200],i=4;i<100;i++)t=t+100+200*(i-4),e.push(t);for(var o=0;o<e.length-1;o++)g_hx_gameData.levelRangeArr.push([e[o],e[o+1]]);return g_hx_gameData.levelRangeArr},stopGame:function(){cc.director.pause()},continueGame:function(){cc.director.resume()},useRunActionDelayed:function(t,e,i){var o=cc.delayTime(e),a=cc.callFunc(function(){i&&i()}.bind(this));t.runAction(cc.sequence(o,a))},playBgBlockAction:function(t,e,i){t&&(t.animationName=e,t.playAnimation(e,i))},getBottomGuard:function(){var t=this.getNowLevel(g_hx_gameData.score),e=2;return t>=1&&t<=7?e=t+1:t>7&&t<=9?e=8:t>9&&(e=9),e},getSameNum:function(t,e){return processArr=e.filter(function(e){return e==t}),processArr.length},getSameMastValue:function(t){var e,i=t.length,o=[];for(e=0;e<i;e++)o[t[e]]?o[t[e]]++:o[t[e]]=1;var a,n,c=0,s=0;return o.forEach(function(t,e){t>c?(s=c,n=a,c=t,a=e):t>s&&(s=t,n=e)}),{frist:a,two:n}},arrObjectDifference:function(t,e){for(var i=[],o=0;o<e.length;o++){for(var a=e[o],n=a.id,c=!1,s=0;s<t.length;s++)if(t[s].id==n){c=!0;break}c||i.push(a)}return i}};e.exports=i,cc._RF.pop()},{}],hx_CreateBlocks:[function(t,e){"use strict";cc._RF.push(e,"53d72b2b2tEMaG3GqG8IrSP","hx_CreateBlocks"),cc.Class({extends:cc.Component,properties:{rowsBlockClearPref:{type:cc.Prefab,default:null},nextBlock_1:{type:cc.Prefab,default:null},nextBlock_2:{type:cc.Prefab,default:null},nextBlock_3:{type:cc.Prefab,default:null},nextBlock_4:{type:cc.Prefab,default:null},blockArea:cc.Node,blockBeam:cc.Node,nextBlockArea:cc.Node,bgBlockOne:cc.Node,bgBlockTwo:cc.Node,bgBlockThree:cc.Node,bgBlockFour:cc.Node,holdLatticeArray:null,appearBlocksArray:[],dropInfoArr:[],parentScript:null,_armatureDisPlay_1:null,_armature_1:null,_armatureDisPlay_2:null,_armature_2:null,_armatureDisPlay_3:null,_armature_3:null,_armatureDisPlay_4:null,_armature_4:null,violetHideArr:[],linkLineArr:[]},onLoad:function(){g_wxPlat.showBannerAd(2)},onInit:function(t,e,i){void 0===i&&(i=null),g_hx_violetBlockData.fieldsNum=0,g_hx_violetBlockData.continuityBlockNum=0,g_hx_violetBlockData.continuityNum=0,g_hx_gameData.BLOCK_ID=0,g_hx_gameData.isStartCheck=!0,g_hx_gameData.doubleHitNum=0,this.parentScript=e,this.parentScript.ctrlMusicScript.playStart(),this.appearBlocksArray=[],this.holdLatticeArray=t,g_hx_gameData.gameState=1,this.onInitBgBlock(),this.blockBeam&&(this.blockBeam.active=!1),null==i?this.getBlocksArray():this.createHistoryBlock(i),this.parentScript.playMouth(2)},createHistoryBlock:function(t){this.appearBlocksArray=[];for(var e=0;e<t.length;e++){this.appearBlocksArray[e]=[];for(var i=0;i<t[e].length;i++){var o=this.historyBlockCreate(t[e][i].blockLength);o.nodeScript.node.x=t[e][i].pos.x,o.nodeScript.node.y=t[e][i].pos.y;for(var a=0;a<t[e][i].blockLength;a++)this.holdLatticeArray[t[e][i].row][t[e][i].col+a].isUsed=1;5==t[e][i].blockColor&&g_hx_violetBlockData.fieldsNum++,g_hx_gameData.BLOCK_ID++;var n={node:o.nodeScript.node,nodeJs:o.nodeScript,pos:t[e][i].pos,blockLength:t[e][i].blockLength,blockColor:t[e][i].blockColor,row:t[e][i].row,col:t[e][i].col,scriptName:o.name,id:g_hx_gameData.BLOCK_ID};this.appearBlocksArray[e].push(n),o.nodeScript.node.active=!0,o.nodeScript.onInit(t[e][i].blockColor,n,this),this.blockArea.addChild(o.nodeScript.node)}}var c=g_hx_CommonFunc.getAppearBlockData().next;this.nextBlockShow(c)},historyBlockCreate:function(t){var e,i;switch(t){case 1:e=hx_NodePool.getInstance().getNodeScr("hx_oneBlocks"),i="hx_oneBlocks";break;case 2:e=hx_NodePool.getInstance().getNodeScr("hx_twoBlocks"),i="hx_twoBlocks";break;case 3:e=hx_NodePool.getInstance().getNodeScr("hx_threeBlocks"),i="hx_threeBlocks";break;case 4:e=hx_NodePool.getInstance().getNodeScr("hx_fourBlocks"),i="hx_fourBlocks"}return{nodeScript:e,name:i}},getBlocksArray:function(t){void 0===t&&(t=0);var e=g_hx_CommonFunc.getAppearBlockData(),i=e.now,o=e.next;this.nextBlockShow(o);var a=0,n=[];g_hx_violetBlockData.rowsAppearNum=0;for(var c=0;c<i.length;c++)if(0==i[c])a++;else if(1==i[c]){var s=hx_NodePool.getInstance().getNodeScr("hx_oneBlocks");this.createBlock(t,a,s,1,n,"hx_oneBlocks"),a++}else if(2==i[c]){var h=hx_NodePool.getInstance().getNodeScr("hx_twoBlocks");this.createBlock(t,a,h,2,n,"hx_twoBlocks"),a+=2}else if(3==i[c]){var r=hx_NodePool.getInstance().getNodeScr("hx_threeBlocks");this.createBlock(t,a,r,3,n,"hx_threeBlocks"),a+=3}else if(4==i[c]){var l=hx_NodePool.getInstance().getNodeScr("hx_fourBlocks");this.createBlock(t,a,l,4,n,"hx_fourBlocks"),a+=4}else console.log("\u4e00\u822c\u4e0d\u6267\u884c\u8fd9\u91cc!");this.appearBlocksArray.unshift(n),this.isRowsAppearViolet(),g_hx_gameState.myGameState=g_hx_gameState.checkIsCanDrop},isRowsAppearViolet:function(){for(var t=!1,e=0;e<this.appearBlocksArray[0].length;e++)5==this.appearBlocksArray[0][e].colorType&&(t=!0);t?g_hx_violetBlockData.continuityBlockNum++:g_hx_violetBlockData.continuityBlockNum=0},createBlock:function(t,e,i,o,a,n){var c=Math.floor(5*Math.random());c=this.isAppearVioletBlock(o),i.node.x=this.holdLatticeArray[t][e].pos.x,i.node.y=this.holdLatticeArray[t][e].pos.y;for(var s=0;s<o;s++)this.holdLatticeArray[t][e+s].isUsed=1;g_hx_gameData.BLOCK_ID++;var h={node:i.node,nodeJs:i,pos:this.holdLatticeArray[t][e].pos,blockLength:o,blockColor:c,row:t,col:e,scriptName:n,id:g_hx_gameData.BLOCK_ID};a.push(h),i.node.active=!0,i.onInit(c,h,this),this.blockArea.addChild(i.node)},isAppearVioletBlock:function(t){var e=Math.floor(5*Math.random());if(g_hx_violetBlockData.fieldsNum<=6&&g_hx_violetBlockData.continuityBlockNum<=3&&g_hx_violetBlockData.rowsAppearNum<1){var i=function(t){var i=Math.random();return e=i>=0&&i<=t?Math.floor(6*Math.random()):Math.floor(5*Math.random())};1==g_hx_gameData.level||(2==g_hx_gameData.level?1==t&&(e=Math.floor(6*Math.random())):3==g_hx_gameData.level||4==g_hx_gameData.level?1!=t&&2!=t||(e=Math.floor(6*Math.random())):5==g_hx_gameData.level?1!=t&&2!=t&&3!=t||(e=Math.floor(6*Math.random())):g_hx_gameData.level>=6&&(1==t?e=i(.1):2==t?e=i(.35):3==t?e=i(.35):4==t&&(e=i(.2)))),5==e&&(g_hx_violetBlockData.rowsAppearNum++,g_hx_violetBlockData.fieldsNum++)}return e},otherBlocksUpMove:function(){if(g_hx_gameData.isGuideOpen)g_hx_gameData.isShowThreeStep=!0;else{this.delEmptyRows();var t=this.appearBlocksArray.length;if(0!=t)for(var e=!0,i=t-1;i>=0;i--)for(var o=this.appearBlocksArray[i].length,a=0;a<o;a++){var n=this.appearBlocksArray[i][a].row+1,c=this.appearBlocksArray[i][a].col,s=this.holdLatticeArray[n][c].pos,h=s;this.appearBlocksArray[i][a].pos=s,this.appearBlocksArray[i][a].row=n;for(var r=this.appearBlocksArray[i][a].blockLength,l=0;l<r;l++)this.holdLatticeArray[n-1][c+l].isUsed=0,this.holdLatticeArray[n][c+l].isUsed=1;this.appearBlocksArray[i][a].nodeJs.updateMyData(this.appearBlocksArray[i][a]),g_hx_AnimationManage.downMoveAnim(this.appearBlocksArray[i][a].node,h,g_hx_actionTime.blockUpTime,function(){e&&(e=!1,g_hx_gameState.myGameState=g_hx_gameState.dropFinishCreateBlocks)}.bind(this))}else this.getBlocksArray()}},blocksDown:function(t){void 0===t&&(t=1);var e=this.appearBlocksArray.length,i=0;if(e<=0)this.otherBlocksUpMove();else{for(var o=t;o<e;o++)for(var a=this.appearBlocksArray[o].length,n=0;n<a;n++){var c=this.appearBlocksArray[o][n],s=c.blockLength,h=c.col,r=c.row;if(1==this.isCanDown(s,h,r))return i=1,void this.playDownAction(o,n)}if(0==i)if(0==this.dropInfoArr.length)if(1==g_hx_gameState.touchEndCancelState)console.log("\u6267\u884c\u5b8c\u6210\u68c0\u6d4b\u4e0b\u843d\uff01 \u4e0d\u53ef\u4ee5\u6389\u843d"),g_hx_gameState.myGameState=g_hx_gameState.moveCheckDropFinish;else{if(this.delEmptyRows(),0==this.appearBlocksArray.length)return void this.otherBlocksUpMove();var l=this.appearBlocksArray[this.appearBlocksArray.length-1][0].row;if(l>=g_hx_gridData.ROWS-3&&this.parentScript.ctrlMusicScript.playWarn(),l>=g_hx_gridData.ROWS-2)g_hx_gameData.gameState=2,g_hx_gameData.isCanMoveUp=!1,console.log("\u6e38\u620f\u7ed3\u675f\uff011"),this.isEjectRevivesPage();else{var u=g_hx_CommonFunc.getBottomGuard();this.appearBlocksArray.length<u?this.otherBlocksUpMove():(g_hx_gameData.isCanMoveUp=!0,l>=g_hx_gridData.ROWS-4&&g_hx_localData.getActiveUsePropNum()<1&&this.parentScript.ejectPropUse())}}else console.log("playing down!"),g_hx_gameState.myGameState=g_hx_gameState.playDropAction;else console.log("\u4e00\u822c\u4e0d\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684!")}},revivesClear:function(){var t=this.appearBlocksArray.length;if(!(t<4)){for(var e=function(){for(var e=t-1;e>=t-4;e--){for(var i=this.appearBlocksArray[e].length,o=0;o<i;o++){var a=this.appearBlocksArray[e][o].nodeJs.id;this.appearBlocksArray[e][o].nodeJs.destroyMyEvent(),this.appearBlocksArray[e][o].nodeJs.node.active=!1,this.appearBlocksArray[e][o].nodeJs.updateMyData(null);var n=this.appearBlocksArray[e][o].scriptName;5==this.appearBlocksArray[e][o].blockColor&&g_hx_violetBlockData.fieldsNum--,hx_NodePool.getInstance().clearNode(n,a)}for(var c in this.holdLatticeArray[e])this.holdLatticeArray[e].hasOwnProperty(c)&&(this.holdLatticeArray[e][c].isUsed=0)}for(var s=t-1;s>=t-4;s--)this.appearBlocksArray[s]=[];this.delEmptyRows(),g_hx_gameData.isCanMoveUp=!0}.bind(this),i=[],o=t-1;o>=t-4;o--)for(var a=this.appearBlocksArray[o].length,n=0;n<a;n++)i.push(this.appearBlocksArray[o][n]);this.parentScript.createParticleAnim(i,e,2)}},isCanDown:function(t,e,i){var o=1;if(0==i)return 0;for(var a=0;a<t;a++)if(1==this.holdLatticeArray[i-1][e+a].isUsed)return 0;return o},playDownAction:function(t,e){this.appearBlocksArray[t][e].row=this.appearBlocksArray[t][e].row-1;var i=this.appearBlocksArray[t][e].col,o=this.appearBlocksArray[t][e].row;this.appearBlocksArray[t][e].pos=this.holdLatticeArray[o][i].pos;var a=this.holdLatticeArray[o][i].pos,n=this.appearBlocksArray[t][e].node;this.appearBlocksArray[t][e].nodeJs.moveTargetPos=a;var c=this.appearBlocksArray[t][e].nodeJs;this.dropInfoArr.push({script:c,node:n,distance:a,time:g_hx_actionTime.blockDropTime,row:this.appearBlocksArray[t][e].row});for(var s=this.appearBlocksArray[t][e].blockLength,h=0;h<s;h++)this.holdLatticeArray[o+1][i+h].isUsed=0,this.holdLatticeArray[o][i+h].isUsed=1;this.appearBlocksArray[t][e].nodeJs.updateMyData(this.appearBlocksArray[t][e]),this.appearBlocksArray[t-1]&&this.appearBlocksArray[t-1].push(this.appearBlocksArray[t][e]),this.appearBlocksArray[t].splice(e,1),this.delEmptyRows(),this.blocksDown()},actionNeedTime:function(t,e){var i=e.y-t.y;return i<=0?i/-66*g_hx_actionTime.blockUpTime:i/66*g_hx_actionTime.blockUpTime},delEmptyRows:function(){for(var t=this.appearBlocksArray.length-1;t>=0;t--){if(0!=this.appearBlocksArray[t].length)return this.appearBlocksArray;this.appearBlocksArray.splice(t,1)}},clearFullRows:function(){for(var t=this.holdLatticeArray.length,e=[],i=0;i<t;i++){for(var o=this.holdLatticeArray[i].length,a=0,n=0;n<o;n++)1==this.holdLatticeArray[i][n].isUsed&&a++;9==a&&e.push(i)}return e},clearFullBlocks:function(){var t=this.clearFullRows();if(t.length<=0)if(g_hx_violetBlockData.continuityNum++,1==g_hx_gameState.touchEndCancelState)g_hx_gameState.myGameState=g_hx_gameState.moveCheckDropFinish;else{console.log("place: clear full blocks1"),this.delEmptyRows();var e=this.appearBlocksArray.length,i=this.appearBlocksArray[e-1][0].row;if(i>=g_hx_gridData.ROWS-4&&this.parentScript.playMouth(1),i>=g_hx_gridData.ROWS-1)g_hx_gameData.gameState=2,g_hx_gameData.isCanMoveUp=!1,console.log("\u6e38\u620f\u7ed3\u675f\uff010"),this.isEjectRevivesPage();else{var o=g_hx_CommonFunc.getBottomGuard();this.appearBlocksArray.length<o?this.otherBlocksUpMove():(g_hx_gameData.isCanMoveUp=!0,i>=g_hx_gridData.ROWS-4&&g_hx_localData.getActiveUsePropNum()<1&&this.parentScript.ejectPropUse())}}else{this.violetHideArr=[],this.linkLineArr=[],this.violetBlockEliminate(t);var a=this.needClearBlock(t);0!=this.violetHideArr.length?this.parentScript.ctrlMusicScript.playLightning():this.parentScript.ctrlMusicScript.playClear_2();var n=g_hx_CommonFunc.arrObjectDifference(this.violetHideArr,a);g_hx_violetBlockData.continuityNum=0;var c=!0,s=function(){if(1==c){c=!1;var e=function(){this.clearAboutVioletBlock(this.violetHideArr),this.clearOtherBlock(n)}.bind(this);this.clearBlock(t,e,n)}}.bind(this);for(var h in t)if(t.hasOwnProperty(h)){for(var r=this.appearBlocksArray[t[h]].length,l=!0,u=0;u<r;u++)l&&(l=!1,this.createClearAction(this.appearBlocksArray[t[h]][u].pos.y,s));g_hx_gameData.isGuideOpen||(g_hx_gameData.doubleHitNum++,g_hx_gameData.doubleHitNum>=2&&this.parentScript.showDoubleHit(g_hx_gameData.doubleHitNum),g_hx_CommonFunc.getScore(1,function(t){var e=function(){}.bind(this);this.parentScript.levelUpTips(t,e)}.bind(this),g_hx_gameData.doubleHitNum),this.parentScript.updateScoreShow(),this.parentScript.updateLevelShow(),this.parentScript.updateHistorySocre())}for(var _=0;_<n.length;_++)_%2==1?g_hx_AnimationManage.clearRosBlockAction(n[_].nodeJs.node,null):g_hx_AnimationManage.clearRosBlockAction_1(n[_].nodeJs.node,null)}},clearAboutVioletBlock:function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e].nodeJs.id;t[e].nodeJs.destroyMyEvent(),t[e].nodeJs.node.active=!1,t[e].nodeJs.updateMyData(null);var o=t[e].scriptName;5==t[e].blockColor&&g_hx_violetBlockData.fieldsNum--,hx_NodePool.getInstance().clearNode(o,i);for(var a=0;a<t[e].blockLength;a++)this.holdLatticeArray[t[e].row][t[e].col+a].isUsed=0;for(var n=0;n<this.appearBlocksArray[t[e].row].length;n++)if(this.appearBlocksArray[t[e].row][n].id==t[e].id){this.appearBlocksArray[t[e].row].splice(n,1);break}}},clearOtherBlock:function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e].nodeJs.id;t[e].nodeJs.destroyMyEvent(),t[e].nodeJs.node.active=!1,t[e].nodeJs.updateMyData(null);var o=t[e].scriptName;5==t[e].blockColor&&g_hx_violetBlockData.fieldsNum--,hx_NodePool.getInstance().clearNode(o,i);for(var a=0;a<t[e].blockLength;a++)this.holdLatticeArray[t[e].row][t[e].col+a].isUsed=0;for(var n=0;n<this.appearBlocksArray[t[e].row].length;n++)if(this.appearBlocksArray[t[e].row][n].id==t[e].id){this.appearBlocksArray[t[e].row].splice(n,1);break}}},clearBlock:function(t,e,i){var o=function(){this.useRunActionDelayed(.15,function(){e&&e(),this.useRunActionDelayed(0,function(){g_hx_gameState.blockDisappearState=1,g_hx_gameState.myGameState=g_hx_gameState.clearFullFinishCheck}.bind(this))}.bind(this))}.bind(this);this.parentScript.createParticleAnim(i,o)},needClearBlock:function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i))for(var o=this.appearBlocksArray[t[i]].length,a=0;a<o;a++)e.push(this.appearBlocksArray[t[i]][a]);return e},leftBlocck:function(t,e,i,o){for(var a=0;a<this.appearBlocksArray[e][i].blockLength;a++)if(this.appearBlocksArray[e][i].col+a==t)return this.violetHideArr.push(this.appearBlocksArray[e][i]),void this.judgeLinkArr(o,this.appearBlocksArray[e][i])},rightBlocck:function(t,e,i,o){for(var a=0;a<this.appearBlocksArray[e][i].blockLength;a++)if(this.appearBlocksArray[e][i].col+a==t)return this.violetHideArr.push(this.appearBlocksArray[e][i]),void this.judgeLinkArr(o,this.appearBlocksArray[e][i])},upBlock:function(t,e,i,o,a){for(var n=0;n<this.appearBlocksArray[e+1][t].blockLength;n++)for(var c=0;c<o;c++)if(this.appearBlocksArray[e+1][t].col+n==i+c)return this.violetHideArr.push(this.appearBlocksArray[e+1][t]),this.judgeLinkArr(a,this.appearBlocksArray[e+1][t]),void(5==this.appearBlocksArray[e+1][t].blockColor&&e+1<this.appearBlocksArray.length&&this.violetTopDownLeftRight(e+1,t,1))},downBlock:function(t,e,i,o,a){for(var n=0;n<this.appearBlocksArray[e-1][t].blockLength;n++)for(var c=0;c<o;c++)if(this.appearBlocksArray[e-1][t].col+n==i+c)return this.violetHideArr.push(this.appearBlocksArray[e-1][t]),this.judgeLinkArr(a,this.appearBlocksArray[e-1][t]),void(5==this.appearBlocksArray[e-1][t].blockColor&&e-1>=0&&this.violetTopDownLeftRight(e-1,t,2))},judgeLinkArr:function(t,e){if(0==this.linkLineArr.length){var i=[];i.push(e),this.linkLineArr.push({centerNode:t,linkArr:i})}else{for(var o=!1,a=0;a<this.linkLineArr.length;a++)this.linkLineArr[a].centerNode.id==t.id&&(this.linkLineArr[a].linkArr.push(e),o=!0);if(0==o){var n=[];n.push(e),this.linkLineArr.push({centerNode:t,linkArr:n})}}},violetBlockEliminate:function(t){for(var e in t)if(t.hasOwnProperty(e))for(var i=this.appearBlocksArray[t[e]].length,o=0;o<i;o++)5==this.appearBlocksArray[t[e]][o].blockColor&&(this.violetHideArr.push(this.appearBlocksArray[t[e]][o]),this.violetTopDownLeftRight(t[e],o));this.violetHideArr=function(t){for(var e=[],i={},o=0;o<t.length;o++)i[t[o].id]||(e.push(t[o]),i[t[o].id]=!0);return e}(this.violetHideArr),this.createAllLightning()},createAllLightning:function(){for(var t=0;t<this.linkLineArr.length;t++){var e=this.linkLineArr[t].centerNode.blockLength,i=cc.v2(this.linkLineArr[t].centerNode.pos.x,this.linkLineArr[t].centerNode.pos.y);i.x=1==e?i.x:2==e?i.x+33:3==e?i.x+66:i.x+99;for(var o=0;o<this.linkLineArr[t].linkArr.length;o++){var a=cc.v2(this.linkLineArr[t].linkArr[o].pos),n=this.linkLineArr[t].linkArr[o].blockLength;a.x=1==n?a.x:2==n?a.x+33:3==n?a.x+66:a.x+99;var c=cc.v2(i.x,i.y).sub(a),s=180-Math.atan2(c.y,c.x)/Math.PI*180,h=Math.sqrt((i.x-a.x)*(i.x-a.x)+(i.y-a.y)*(i.y-a.y));this.parentScript.createLightningPref(i,h,s)}}},violetTopDownLeftRight:function(t,e,i){void 0===i&&(i=0);var o=this.appearBlocksArray[t][e].col,a=this.appearBlocksArray[t][e].row,n=this.appearBlocksArray[t][e].blockLength,c=this.appearBlocksArray[t][e];if(o-1>=0&&1==this.holdLatticeArray[a][o-1].isUsed)for(var s=0;s<this.appearBlocksArray[a].length;s++)this.leftBlocck(o-1,a,s,c);if(o+n<=8&&1==this.holdLatticeArray[a][o+n].isUsed)for(var h=0;h<this.appearBlocksArray[a].length;h++)this.rightBlocck(o+n,a,h,c);switch(i){case 0:if(a+1<this.appearBlocksArray.length)for(var r=0;r<this.appearBlocksArray[a+1].length;r++)this.upBlock(r,a,o,n,c);if(a-1>=0)for(var l=0;l<this.appearBlocksArray[a-1].length;l++)this.downBlock(l,a,o,n,c);break;case 1:if(a+1<this.appearBlocksArray.length)for(r=0;r<this.appearBlocksArray[a+1].length;r++)this.upBlock(r,a,o,n,c);break;case 2:if(a-1>=0)for(l=0;l<this.appearBlocksArray[a-1].length;l++)this.downBlock(l,a,o,n,c)}},backBlocksInfo:function(t){var e=this.arrangementData(t);this.getMoveRange(e)},arrangementData:function(t){for(var e=-1,i=-1,o=-1,a=-1,n=this.appearBlocksArray.length,c=0;c<n;c++){var s=this.appearBlocksArray[c].indexOf(t);s>=0&&(e=c,i=this.appearBlocksArray[c][s].col,o=this.appearBlocksArray[c][s].blockLength,a=s)}return{oneIndex:e,twoIndex:i,blockLen:o,appearTwoIndex:a}},getMoveRange:function(t){var e=0,i=this.getLeftMoveIndex(t),o=this.getRightMoveIndex(t),a=null,n=null;return i==o?e=-1:(e=0,a=this.holdLatticeArray[t.oneIndex][i].pos,n=this.holdLatticeArray[t.oneIndex][o].pos),g_hx_commonData.touchInfo={state:e,min:a,max:n,minIndex:i,maxIndex:o,rowIndex:t.oneIndex,touchData:t},{state:e,min:a,max:n,minIndex:i,maxIndex:o,rowIndex:t.oneIndex,touchData:t}},getLeftMoveIndex:function(t){var e=-1;if(t.twoIndex-1<0)return t.twoIndex;for(var i=t.twoIndex-1;i>=0;i--){if(1==this.holdLatticeArray[t.oneIndex][i].isUsed)return i+1;0==i&&-1==e&&(e=0)}return e},getRightMoveIndex:function(t){var e=-1;if(t.twoIndex+t.blockLen>=9)return t.twoIndex;for(var i=t.twoIndex+t.blockLen;i<9;i++){if(1==this.holdLatticeArray[t.oneIndex][i].isUsed)return i-t.blockLen;8==i&&-1==e&&(e=8-t.blockLen+1)}return e},comparisonPos:function(t){if(-1!=g_hx_commonData.touchInfo.state){for(var e=g_hx_commonData.touchInfo.rowIndex,i=g_hx_commonData.touchInfo.minIndex,o=g_hx_commonData.touchInfo.maxIndex,a=[],n=[],c=i;c<=o;c++){var s=this.holdLatticeArray[e][c].pos;a.push({pos:s,colIndex:c})}for(var h=0;h<a.length;h++){var r;r=0==h?{min:a[h].pos.x-g_hx_gridData.GIRDHEIGHT/2,max:a[h].pos.x+g_hx_gridData.GIRDHEIGHT/2,index:a[h].colIndex}:(a.length,{min:a[h].pos.x-g_hx_gridData.GIRDHEIGHT/2,max:a[h].pos.x+g_hx_gridData.GIRDHEIGHT/2,index:a[h].colIndex}),n.push(r)}var l=this.getBlockStopPos(t,n);return null==l?null:{pos:this.holdLatticeArray[e][l].pos,stopIndex:l}}return null},getBlockStopPos:function(t,e){for(var i=0;i<e.length;i++)if(t>=e[i].min&&t<=e[i].max)return e[i].index;return null},touchEndchangeData:function(t,e){for(var i=t.col;i<t.col+t.blockLength;i++)this.holdLatticeArray[t.row][i].isUsed=0;for(var o=e.stopIndex;o<e.stopIndex+t.blockLength;o++)this.holdLatticeArray[t.row][o].isUsed=1;return this.appearBlocksArray[t.row][g_hx_commonData.touchInfo.touchData.appearTwoIndex].pos=e.pos,this.appearBlocksArray[t.row][g_hx_commonData.touchInfo.touchData.appearTwoIndex].col=e.stopIndex,this.appearBlocksArray[t.row][g_hx_commonData.touchInfo.touchData.appearTwoIndex]},useRunActionDelayed:function(t,e){var i=cc.delayTime(t),o=cc.callFunc(function(){e&&e()}.bind(this));this.node.runAction(cc.sequence(i,o))},ArrangementArray:function(){if(!(this.dropInfoArr.length<=0)){var t=this.dropInfoArr.concat();return this.getTwoDimensional(t)}},getTwoDimensional:function(t){for(var e=[],i=t.length,o=0;o<=12;o++){for(var a=[],n=0;n<i;n++)o==t[n].row&&a.push(t[n]);a.length>0&&e.push(a)}return e},update:function(){switch(g_hx_gameState.myGameState){case g_hx_gameState.playDropAction:g_hx_gameState.myGameState="null",this.parentScript.ctrlMusicScript.playDown(),g_hx_testAnimLastPlay.playTimeArr=[],g_hx_testAnimLastPlay.index=0;var t=this.ArrangementArray();g_hx_AnimationManage.queuePlay(this.node,t),this.dropInfoArr=[];break;case g_hx_gameState.playClearFullBlocks:g_hx_gameState.myGameState="null",this.useRunActionDelayed(.15,function(){this.clearFullBlocks()}.bind(this));break;case g_hx_gameState.dropFinishCreateBlocks:g_hx_gameState.myGameState="null",this.useRunActionDelayed(.2,function(){1==g_hx_gameData.gameState&&this.getBlocksArray(0)}.bind(this));break;case g_hx_gameState.checkIsCanDrop:g_hx_gameState.myGameState="null",this.useRunActionDelayed(.2,function(){this.blocksDown()}.bind(this));break;case g_hx_gameState.clearFullFinishCheck:1==g_hx_gameState.blockDisappearState&&(g_hx_gameState.blockDisappearState=0,g_hx_gameState.myGameState="null",this.useRunActionDelayed(.1,function(){this.blocksDown(0)}.bind(this)));break;case g_hx_gameState.moveCheckDropFinish:g_hx_gameState.touchEndCancelState=0,g_hx_gameState.myGameState="null",this.useRunActionDelayed(.2,function(){this.otherBlocksUpMove()}.bind(this))}},showBeamPos:function(t,e){this.blockBeam&&(this.blockBeam.x=t,this.blockBeam.width=e,this.blockBeam.active=!0)},setnBeamHide:function(){this.blockBeam&&(this.blockBeam.active=!1)},onInitBgBlock:function(){this.hideBlockBg(),null!=this._armatureDisPlay_1&&null!=this._armature_1||(this._armatureDisPlay_1=this.bgBlockOne.getComponent(dragonBones.ArmatureDisplay),this._armature_1=this._armatureDisPlay_1.armature()),null!=this._armatureDisPlay_2&&null!=this._armature_2||(this._armatureDisPlay_2=this.bgBlockTwo.getComponent(dragonBones.ArmatureDisplay),this._armature_2=this._armatureDisPlay_2.armature()),null!=this._armatureDisPlay_3&&null!=this._armature_3||(this._armatureDisPlay_3=this.bgBlockThree.getComponent(dragonBones.ArmatureDisplay),this._armature_3=this._armatureDisPlay_3.armature()),null!=this._armatureDisPlay_4&&null!=this._armature_4||(this._armatureDisPlay_4=this.bgBlockFour.getComponent(dragonBones.ArmatureDisplay),this._armature_4=this._armatureDisPlay_4.armature())},showBgBlockPos:function(t,e,i,o){switch(e){case 0:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_fen_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_fen_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_fen_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_fen_4_jing"),this.setFourBlockPos(i,o));break;case 1:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_lan_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_lan_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_lan_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_lan_4_jing"),this.setFourBlockPos(i,o));break;case 2:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_huang_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_huang_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_huang_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_huang_4_jing"),this.setFourBlockPos(i,o));break;case 3:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_hong_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_hong_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_hong_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_hong_4_jing"),this.setFourBlockPos(i,o));break;case 4:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_lv_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_lv_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_lv_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_lv_4_jing"),this.setFourBlockPos(i,o));break;case 5:1==t?(this.playBgBlockAction(this._armatureDisPlay_1,"ZYX_zi_1_jing"),this.setOneBlockPos(i,o)):2==t?(this.playBgBlockAction(this._armatureDisPlay_2,"ZYX_zi_2_jing"),this.setTwoBlockPos(i,o)):3==t?(this.playBgBlockAction(this._armatureDisPlay_3,"ZYX_zi_3_jing"),this.setThreeBlockPos(i,o)):4==t&&(this.playBgBlockAction(this._armatureDisPlay_4,"ZYX_zi_4_jing"),this.setFourBlockPos(i,o))}},playBgBlockAction:function(t,e){t.animationName=e,t.playAnimation(e,0)},hideBlockBg:function(){this.bgBlockOne&&(this.bgBlockOne.active=!1),this.bgBlockTwo&&(this.bgBlockTwo.active=!1),this.bgBlockThree&&(this.bgBlockThree.active=!1),this.bgBlockFour&&(this.bgBlockFour.active=!1)},setOneBlockPos:function(t,e){this.bgBlockOne.active=!0,this.bgBlockOne.x=t,this.bgBlockOne.y=e-1},setTwoBlockPos:function(t,e){this.bgBlockTwo.active=!0,this.bgBlockTwo.x=t,this.bgBlockTwo.y=e-1},setThreeBlockPos:function(t,e){this.bgBlockThree.active=!0,this.bgBlockThree.x=t,this.bgBlockThree.y=e-1},setFourBlockPos:function(t,e){this.bgBlockFour.active=!0,this.bgBlockFour.x=t,this.bgBlockFour.y=e-1},createClearAction:function(t,e){void 0===e&&(e=null);var i=cc.instantiate(this.rowsBlockClearPref);this.blockArea.addChild(i),i.y=t,i.getComponent("hx_rowClearAction").onInit(e)},isEjectRevivesPage:function(){if(g_hx_localData.getRevivesNum()>=g_hx_needCtrlData.revivesNum)this.gameOverClearBlocks();else{var t=function(){g_hx_gameData.gameState=1,this.revivesClear()}.bind(this),e=function(){this.gameOverClearBlocks()}.bind(this);this.parentScript.showRevivesPage(g_hx_gameData.score,t,e)}},usePropBird:function(t){var e,i,o,a=this;this.delEmptyRows(),this.appearBlocksArray.length>0&&function(){var n=g_hx_localData.getBirdColor();console.log(n,"nowColor:");var c=[];for(e=0;e<a.appearBlocksArray.length;e++){var s=a.appearBlocksArray[e].length;for(i=0;i<s;i++)n==a.appearBlocksArray[e][i].blockColor&&c.push(a.appearBlocksArray[e][i])}if(0==c.length){if(console.log("\u6ca1\u6709\u80fd\u4f7f\u7528\u6280\u80fd\u7684\u7816\u5757"),g_hx_gameData.watchAdVideo){g_hx_gameData.watchAdVideo=!1,g_hx_localData.setBirdNum(1,0);var h=g_hx_localData.getPropNum();a.parentScript.updatePropShow(h)}g_hx_gameData.isCanMoveUp=!0,Tips.showToast("\u6ca1\u6709\u80fd\u4f7f\u7528\u6280\u80fd\u7684\u7816\u5757!")}else t&&t(),g_hx_gameData.watchAdVideo=!1;for(a.parentScript.createBirdAnim(c),console.log(c,"actionArr:==="),o=0;o<c.length;o++){var r=function(){for(var t=0;t<c.length;t++){var e=c[t].nodeJs.id;c[t].nodeJs.destroyMyEvent(),c[t].nodeJs.node.active=!1,c[t].nodeJs.updateMyData(null);var i=c[t].scriptName;5==c[t].blockColor&&g_hx_violetBlockData.fieldsNum--,hx_NodePool.getInstance().clearNode(i,e);for(var o=0;o<c[t].blockLength;o++)this.holdLatticeArray[c[t].row][c[t].col+o].isUsed=0;t==c.length-1&&(this.delEmptyRows(),this.clearBirdEatBlock(n),this.blocksDown())}}.bind(a);o!=c.length-1&&(r=null),g_hx_AnimationManage.propClearBlockAction(c[o].node,r,1)}}()},clearBirdEatBlock:function(t){for(var e=0;e<this.appearBlocksArray.length;e++)for(var i=this.appearBlocksArray[e].length,o=0;o<i;o++)if(t==this.appearBlocksArray[e][o].blockColor)return this.appearBlocksArray[e].splice(o,1),void this.clearBirdEatBlock(t)},usePropHammer:function(t){var e,i,o,a=this;this.delEmptyRows(),this.appearBlocksArray.length>0&&function(){var n=[];for(e=0;e<a.appearBlocksArray.length;e++){var c=a.appearBlocksArray[e].length;for(i=0;i<c;i++)3!=a.appearBlocksArray[e][i].blockLength&&4!=a.appearBlocksArray[e][i].blockLength||5!=a.appearBlocksArray[e][i].blockColor&&n.push(a.appearBlocksArray[e][i])}if(a.parentScript.createHammerAnim(n),0==n.length){if(g_hx_gameData.watchAdVideo){g_hx_gameData.watchAdVideo=!1,g_hx_localData.setHammerNum(1,0);var s=g_hx_localData.getPropNum();a.parentScript.updatePropShow(s)}console.log("\u6ca1\u6709\u80fd\u4f7f\u7528\u6280\u80fd\u7684\u7816\u5757"),g_hx_gameData.isCanMoveUp=!0,Tips.showToast("\u6ca1\u6709\u80fd\u4f7f\u7528\u6280\u80fd\u7684\u7816\u5757!")}else t&&t(),g_hx_gameData.watchAdVideo=!1;for(o=0;o<n.length;o++){var h=function(){for(var t=0;t<n.length;t++){var e=n[t].nodeJs.id;n[t].nodeJs.destroyMyEvent(),n[t].nodeJs.node.active=!1,n[t].nodeJs.updateMyData(null);var i=n[t].scriptName;5==n[t].blockColor&&g_hx_violetBlockData.fieldsNum--,hx_NodePool.getInstance().clearNode(i,e);for(var o=0;o<n[t].blockLength;o++){var a=this.holdLatticeArray[n[t].row][n[t].col+o].pos,c=n[t].row,s=n[t].col+o,h=n[t].blockColor;this.createBlockInWhere(c,s,a,h)}t==n.length-1&&(this.delEmptyRows(),this.clearLengthBlock(),this.blocksDown())}}.bind(a);o!=n.length-1&&(h=null),g_hx_AnimationManage.propClearBlockAction(n[o].node,h)}}()},createBlockInWhere:function(t,e,i,o){5==o&&g_hx_violetBlockData.fieldsNum++;var a=hx_NodePool.getInstance().getNodeScr("hx_oneBlocks");g_hx_gameData.BLOCK_ID++;var n={node:a.node,nodeJs:a,pos:i,blockLength:1,blockColor:o,row:t,col:e,scriptName:"hx_oneBlocks",id:g_hx_gameData.BLOCK_ID};this.appearBlocksArray[t].push(n),a.node.active=!0,a.node.x=i.x,a.node.y=i.y,a.onInit(o,n,this),this.blockArea.addChild(a.node)},clearLengthBlock:function(){for(var t=0;t<this.appearBlocksArray.length;t++)for(var e=this.appearBlocksArray[t].length,i=0;i<e;i++)if((3==this.appearBlocksArray[t][i].blockLength||4==this.appearBlocksArray[t][i].blockLength)&&5!=this.appearBlocksArray[t][i].blockColor)return this.appearBlocksArray[t].splice(i,1),void this.clearLengthBlock()},gameOverClearBlocks:function(){var t=this;this.parentScript.playMouth(3),this.parentScript.ctrlMusicScript.playOver();for(var e=this.appearBlocksArray.length-1;e>=0;e--)for(var i=this.appearBlocksArray[e].length,o=function(){var i=t.appearBlocksArray[e][a].node,o=t.appearBlocksArray[e][a].blockLength;g_hx_AnimationManage.blockBeEatAction(i,o,function(){i.active=!1}.bind(t),function(){this.parentScript.showGameFailPage(g_hx_gameData.score)}.bind(t))},a=0;a<i;a++)o()},nextBlockShow:function(t){var e=[[-264,0],[-198,0],[-132,0],[-66,0],[0,0],[66,0],[132,0],[198,0],[264,0]];this.nextBlockArea.removeAllChildren();for(var i=0,o=0;o<t.length;o++){var a=null;switch(t[o]){case 0:i++;break;case 1:(a=cc.instantiate(this.nextBlock_1)).x=e[i][0],a.y=e[i][1],this.nextBlockArea.addChild(a),i++;break;case 2:(a=cc.instantiate(this.nextBlock_2)).x=e[i][0],a.y=e[i][1],this.nextBlockArea.addChild(a),i+=2;break;case 3:(a=cc.instantiate(this.nextBlock_3)).x=e[i][0],a.y=e[i][1],this.nextBlockArea.addChild(a),i+=3;break;case 4:(a=cc.instantiate(this.nextBlock_4)).x=e[i][0],a.y=e[i][1],this.nextBlockArea.addChild(a),i+=4}}},getBlockMostColor:function(){var t=[];if(this.appearBlocksArray){this.appearBlocksArray.length<=0&&Math.floor(6*Math.random());for(var e=0;e<this.appearBlocksArray.length;e++)for(var i=this.appearBlocksArray[e].length,o=0;o<i;o++)t.push(this.appearBlocksArray[e][o].blockColor);return g_hx_CommonFunc.getSameMastValue(t)}return 0}}),cc._RF.pop()},{}],hx_GameData:[function(t,e,i){"use strict";cc._RF.push(e,"d7f798AQXtPiqpFMINGw5rw","hx_GameData"),i.hx_gridData={ROWS:12,COLS:9,WIDTH:64,HEIGHT:64,GIRDWIDTH:66,GIRDHEIGHT:66},i.hx_gameData={gameState:0,isCanMoveUp:!0,score:0,level:1,levelRangeArr:[],doubleHitNum:0,watchAdVideo:!1,inPrefab:null,isStartCheck:!1,isGuideOpen:!1,isShowThreeStep:!1,BLOCK_ID:0,guideData:{zyhxHighHistory:0,zyhxBlockData:[[{pos:{x:-264,y:-364},blockLength:1,blockColor:3,row:0,col:0},{pos:{x:-132,y:-364},blockLength:2,blockColor:1,row:0,col:2},{pos:{x:0,y:-364},blockLength:3,blockColor:4,row:0,col:4},{pos:{x:198,y:-364},blockLength:2,blockColor:3,row:0,col:7}],[{pos:{x:-264,y:-298},blockLength:3,blockColor:2,row:1,col:0},{pos:{x:0,y:-298},blockLength:2,blockColor:0,row:1,col:4},{pos:{x:132,y:-298},blockLength:3,blockColor:1,row:1,col:6}],[{pos:{x:-264,y:-232},blockLength:1,blockColor:1,row:2,col:0},{pos:{x:-198,y:-232},blockLength:3,blockColor:0,row:2,col:1},{pos:{x:66,y:-232},blockLength:1,blockColor:2,row:2,col:5}]],zyhxHistoryScore:0}},i.hx_actionTime={blockDropTime:.03,blockUpTime:.1,blockElasticTime1:.05,blockElasticTime2:.03,blockClearActionTime:.03,blockClearActionTime_1:.02,blockClearActionTime_2:.01,blockClearWait:.8,blockClearWaitTime:0,blockShakeWait:1,blockClearWaitTime1:.8,BLINK_INTERVAL:3e3,BLINK_RATE:.3,BLINK_DURATION:1,PROP_BIRD_TIME:1.5,BLOCK_MOVE_MOUTH:.15,QUEUE_INTERVAL_TIME:70},i.hx_gameState={dropState:0,checkIsDrop:0,isUsing:0,isDropPlayAction:0,myGameState:"null",playDropAction:"playDropAction",playClearFullBlocks:"playClearFullBlocks",dropFinishCreateBlocks:"dropFinishCreateBlocks",checkIsCanDrop:"checkIsCanDrop",clearFullFinishCheck:"clearFullFinishCheck",moveCheckDropFinish:"moveCheckDropFinish",touchEndCancelState:0,blockDisappearState:0},i.hx_costDiamonds={revivesPage:10,PropCostDiamonds:10},i.hx_needCtrlData={revivesNum:2,isAlreadyEjectVideo:!1},i.hx_testAnimLastPlay={playTimeArr:[],playIndex:0,isFristEnter:!0,isQueseEnter:!1},i.hx_cloudData={cloudType_1:{wait:1.5,moveSpeed:.4,cloudType:0,startPosX:500,endPosX:-500,posY:560},cloudType_2:{wait:1,moveSpeed:.3,cloudType:3,startPosX:500,endPosX:-500,posY:50},cloudType_3:{wait:2,moveSpeed:.3,cloudType:2,startPosX:700,endPosX:-700,posY:100},cloudType_4:{wait:1,moveSpeed:.5,cloudType:4,startPosX:800,endPosX:-800,posY:240},cloudType_5:{wait:1,moveSpeed:.3,cloudType:4,startPosX:600,endPosX:-600,posY:480},cloudType_6:{wait:.1,moveSpeed:.1,cloudType:3,startPosX:500,endPosX:-500,posY:-200},cloudType_7:{wait:2,moveSpeed:.3,cloudType:4,startPosX:600,endPosX:-600,posY:-100}},i.hx_violetBlockData={rowsAppearNum:0,continuityNum:0,fieldsNum:0,continuityBlockNum:0},cc._RF.pop()},{}],hx_Game:[function(t,e){"use strict";cc._RF.push(e,"7ea2a6TPt1OAK9l6kkPkwFh","hx_Game");var i=[{ID:1,num:0},{ID:2,num:0},{ID:3,num:0},{ID:4,num:0},{ID:5,num:0}];console.log=function(){},cc.Class({extends:cc.Component,properties:{latticeBg:{type:cc.Node,default:null},blockArea:{type:cc.Node,default:null},blockPref_1:{type:cc.Prefab,default:null},blockPref_2:{type:cc.Prefab,default:null},blockPref_3:{type:cc.Prefab,default:null},blockPref_4:{type:cc.Prefab,default:null},gameFailPref:{type:cc.Prefab,default:null},continueGamePref:{type:cc.Prefab,default:null},guidePref:{type:cc.Prefab,default:null},propHammer:{type:cc.Prefab,default:null},propBird:{type:cc.Prefab,default:null},particlePref:{type:cc.Prefab,default:null},lightningPref:{type:cc.Prefab,default:null},myBgNode:cc.Node,ctrlMusicNode:cc.Node,ctrlMusicScript:null,propArea:cc.Node,propAreaScript:null,mouthNode:cc.Node,scoreLabel:cc.Label,levelLabel:cc.Label,getScoreTipsLabel:cc.Label,historyScore:cc.Label,doubleHit:cc.Node,tipsLevelUpLabel:cc.Node,holdLattice:null,holdBlock:null,stopGameNode:null,gameFailNode:null,revivesNode:null,_armatureDisPlay_1:null,_armature_1:null,_armatureDisPlay_mouth:null,_armature_mouth:null,startAnimBox:cc.Node,historyTipsLabel:cc.Node,historyScoreLabel:cc.Node,startNode:cc.Node,anim:cc.Node,panel:cc.Node,prizeProp_1:cc.Node,prizeProp_2:cc.Node,prop_1:cc.Node,prop_2:cc.Node,playKeelCb:null,moreScore:0,curGamePrize:!1},onLoad:function(){var t=this;g_hx_localData&&g_hx_localData._init(),this.prizeProp_1.active=!1,this.prizeProp_2.active=!1,this.getMoreScore(),g_wxPlat.showBannerAd(2),this.scheduleOnce(function(){t.openRecommend()},.5),i=[{ID:1,num:0},{ID:2,num:0},{ID:3,num:0},{ID:4,num:0},{ID:5,num:0}],Tips.changeScene(),g_wanxArder.game_layer=this,g_oEvent.addEventListener(g_tEvent.OUT_GAME,function(){this.onshowPauseView()}.bind(this)),hx_NodePool.getInstance().addPool("hx_oneBlocks",this.blockPref_1),hx_NodePool.getInstance().addPool("hx_twoBlocks",this.blockPref_2),hx_NodePool.getInstance().addPool("hx_threeBlocks",this.blockPref_3),hx_NodePool.getInstance().addPool("hx_fourBlocks",this.blockPref_4),this.latticeBg&&(this.holdLattice=this.latticeBg.getComponent("hx_LibsGrid"),this.holdLattice.onInit()),g_hx_commonData.musicCtrl=g_hx_localData.getIsSoundClose(),this.tipsLevelUpLabel&&(this.tipsLevelUpLabel.active=!1),this.gameFailPage(),this.propInit(),this.isShowDoubleHit(!1),this.mouthActionInit(),null!=this._armatureDisPlay_1&&null!=this._armature_1||(this._armatureDisPlay_1=this.doubleHit.getComponent(dragonBones.ArmatureDisplay),this._armature_1=this._armatureDisPlay_1.armature(),this._armatureDisPlay_1.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this)),this.ctrlMusicScript=this.ctrlMusicNode.getComponent("hx_playEffect"),this.ctrlMusicScript.playBgm(),this.createCloud()},playGetPrizeAnim:function(t,e){var i=this.prizeProp_1,o=this.prop_1;this.prizeProp_1.x=0,this.prizeProp_1.y=0,this.prizeProp_2.x=0,this.prizeProp_2.y=0,1==t?(i=this.prizeProp_1,o=this.prop_1):(i=this.prizeProp_2,o=this.prop_2),i.scaleX=1,i.scaleY=1,i.opacity=255;var a=o.convertToWorldSpaceAR(cc.v2(0,0)),n=this.anim.convertToNodeSpaceAR(a);i.active=!0;var c=[cc.v2(0,0),cc.v2(200,300),n],s=cc.bezierTo(1.2,c),h=cc.scaleTo(1.2,.28),r=cc.delayTime(.3),l=cc.callFunc(function(){var t=cc.fadeOut(.3),o=cc.callFunc(function(){e&&e()});i.runAction(cc.sequence(t,o))});i.runAction(cc.sequence(s,r,l)),i.runAction(h)},start:function(){if(this.blockArea&&(g_hx_CommonFunc.getLevelRange(),g_hx_gameData.score=0,g_hx_gameData.level=1,this.updateScoreShow(),this.updateLevelShow(),this.updateHistorySocre(),this.holdBlock=this.blockArea.getComponent("hx_CreateBlocks")),this.startAnimInit(),g_hx_localData.getNoviceGuide()){var t=g_hx_gameData.guideData.zyhxHistoryScore,e=g_hx_gameData.guideData.zyhxBlockData;this.resetGame(2,t,e),this.createGuide(this.holdBlock.appearBlocksArray),g_hx_localData.setNoviceGuide(!1)}else this.showContinueGamePage()},onDestroy:function(){g_oEvent.clearEventListener(g_tEvent.OUT_GAME,this.onshowPauseView,this),g_wanxArder.nodeIsValid(this.node)&&g_wanxArder.nodeIsValid(this._armatureDisPlay_1)&&this._armatureDisPlay_1.removeEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this),console.log("close zyhx scene!"),hx_NodePool.getInstance().clearAll(),hx_NodePool.getInstance().clearPoolList()},completeEvent:function(t){"ZYX_wenzi_kaishi"==t.animationState.name&&this.playKeelCb&&this.playKeelCb()},onshowPauseView:function(){this.clickStopGame()},resetGame:function(t,e,i){if(void 0===t&&(t=1),void 0===e&&(e=null),void 0===i&&(i=null),1==t){this.curGamePrize=!1,this.getMoreScore(),g_hx_gameData.isCanMoveUp=!1,hx_NodePool.getInstance().clearAll();var o=function(){this.initGame(),g_hx_localData.setRevivesNum(0),g_hx_localData.setActiveUsePropNum(0)}.bind(this);this.startGameAnim(o)}else null==i||0==i.length||null==e?(this.getMoreScore(),this.initGame(),g_hx_localData.setRevivesNum(0),g_hx_localData.setActiveUsePropNum(0)):(g_hx_gameData.score=e,g_hx_CommonFunc.getScore(0),this.getMoreScore(),this.updateScoreShow(),this.updateLevelShow(),this.holdLattice.resetGridArray(),null!=this.holdBlock&&this.holdBlock.onInit(this.holdLattice.GRIDARRAY,this,i),g_hx_commonData.touchInfo=null,g_hx_gameData.isCanMoveUp=!0)},getMoreScore:function(){console.log("g_hx_gameData.score",g_hx_gameData.score,this.moreScore);var t=g_hx_gameData.score>0?g_hx_gameData.score+15:15;this.moreScore=t+Math.floor(20*Math.random())},initGame:function(){this.tipsLevelUpLabel&&(this.tipsLevelUpLabel.active=!1),this.isShowDoubleHit(!1),hx_NodePool.getInstance().clearAll(),g_hx_gameData.score=0,g_hx_gameData.level=1,this.updateScoreShow(),this.updateLevelShow(),this.holdLattice&&this.holdLattice.resetGridArray(),this.holdBlock.onInit(this.holdLattice.GRIDARRAY,this),g_hx_commonData.touchInfo=null,g_hx_gameData.isCanMoveUp=!1},updateScoreShow:function(t,e){void 0===t&&(t=0),0==t?(this.scoreLabel.string=g_hx_gameData.score.toString(),g_hx_gameData.score&&g_hx_gameData.score>=this.moreScore&&!this.curGamePrize&&(this.curGamePrize=!0,this.openGamePrize())):this.scoreLabel.string=e.toString()},updateLevelShow:function(){this.levelLabel.string="\u5173\u5361 :  "+g_hx_gameData.level},updateHistorySocre:function(){var t=g_hx_localData.getHistoryHighScore();this.historyScore.string="\u5386\u53f2\u9ad8\u5206 \uff1a "+t},stopGamePage:function(t,e,o,a){var n=this,c=function(){n.stopGameNode=cc.instantiate(n.stopGamePrefabs),n.node.addChild(n.stopGameNode),n.stopGameNode.getComponent("hx_stopGame").onInit(t,e,o,a)};this.stopGamePrefabs?c():g_resLoad.addPrefab("hx_stopGame",function(t){n.stopGamePrefabs=t,c()},function(){i[0].num<3&&(i[0].num++,n.stopGamePage())},!0)},openGamePrize:function(){var t=this,e=function(){t.prizeNode=cc.instantiate(t.hx_prize),t.node.addChild(t.prizeNode),t.prizeNode.getComponent("hx_prize").onInit(t)};this.hx_prize?e():g_resLoad.addPrefab("hx_prize",function(i){t.hx_prize=i,e()},function(){},!0)},openRecommend:function(){var t=this,e=function(){t.recommendCommonNode=cc.instantiate(t.recommendCommon),t.panel.addChild(t.recommendCommonNode),t.recommendCommonNode.getComponent("recommendCommon").onInit()};this.recommendCommon?e():g_resLoad.addPrefab("recommendCommon",function(i){t.recommendCommon=i,e()},function(){},!0)},clickStopGame:function(){if(g_hx_gameData.isCanMoveUp){for(var t=function(){this.resetGame()}.bind(this),e=g_hx_gameData.score,i=(this.holdBlock.appearBlocksArray,[]),o=0;o<this.holdBlock.appearBlocksArray.length;o++){i[o]=[];for(var a=0;a<this.holdBlock.appearBlocksArray[o].length;a++)i[o].push({pos:this.holdBlock.appearBlocksArray[o][a].pos,blockLength:this.holdBlock.appearBlocksArray[o][a].blockLength,blockColor:this.holdBlock.appearBlocksArray[o][a].blockColor,row:this.holdBlock.appearBlocksArray[o][a].row,col:this.holdBlock.appearBlocksArray[o][a].col})}this.stopGamePage(t,e,i,this)}},savaData:function(){for(var t=g_hx_gameData.score,e=[],i=this.holdBlock.appearBlocksArray,o=i.length,a=0;a<o;a++){e[a]=[];for(var n=i[a].length,c=0;c<n;c++)e[a].push({pos:i[a][c].pos,blockLength:i[a][c].blockLength,blockColor:i[a][c].blockColor,row:i[a][c].row,col:i[a][c].col})}console.log("sava!"),g_hx_localData.setHistoryBlockData(e,t)},revivesPage:function(t,e,o){var a=this,n=function(){a.revivesNode=cc.instantiate(a.revivesPrefab),a.node.addChild(a.revivesNode),a.revivesNode.getComponent("hx_revivesPage").onInit(t,e,o)};this.revivesPrefab?n():g_resLoad.addPrefab("hx_revivesPage",function(t){a.revivesPrefab=t,n()},function(){i[3].num<3?(i[3].num++,a.revivesPage()):a.showGameFailPage(g_hx_gameData.score)},!0)},showRevivesPage:function(t,e,i){var o=function(){e&&e()}.bind(this);this.revivesPage(t,o,i)},gameFailPage:function(){this.gameFailNode=cc.instantiate(this.gameFailPref),this.node.addChild(this.gameFailNode),this.gameFailNode.active=!1},showGameFailPage:function(t){var e=function(){this.resetGame()}.bind(this);this.gameFailNode&&!this.gameFailNode.active&&(this.gameFailNode.active=!0,this.gameFailNode.getComponent("hx_gameFail").onInit(e,t,this))},showContinueGamePage:function(){var t=g_hx_localData.getHistoryBlockData(),e=t.zyhxHistoryScore,i=[];0!=t.zyhxBlockData.length&&(2===t.zyhxBlockData.length&&0==e||(i=t.zyhxBlockData)),function(){this.resetGame()}.bind(this);var o=function(){0==e&&0==i.length?this.resetGame():0==i.length?this.resetGame():this.resetGame(2,e,i)}.bind(this);0==t.zyhxBlockData.length?this.resetGame():o&&o()},levelUpTips:function(t,e){void 0===e&&(e=null),this.tipsLevelUpLabel&&(this.tipsLevelUpLabel.getComponent(cc.Label).string="\u5173\u5361"+t.toString(),this.getScoreTipsLabel.string="\u5206\u6570 x"+t,this.tipsLevelUpLabel.active=!0,g_hx_AnimationManage.levelUpAction(this.tipsLevelUpLabel,e))},propInit:function(){this.propArea&&(this.propAreaScript=this.propArea.getComponent("hx_Prop"),this.propAreaScript.onInit(this.node,this))},ejectPropUse:function(){this.propAreaScript.ejectPropUse()},updatePropShow:function(t){t&&(this.propAreaScript.birdPropNumShow(t.bird),this.propAreaScript.hammerPropNumShow(t.hammner))},showDoubleHit:function(t){this.isShowDoubleHit(!0),this.selectDoubleHitAnim(t)},isShowDoubleHit:function(t){this.doubleHit&&(this.doubleHit.active=t)},selectDoubleHitAnim:function(t){switch(0==t?(this.doubleHit.x=0,this.doubleHit.y=0):(this.doubleHit.x=0,this.doubleHit.y=-247),t>=9&&(t=9),t){case 2:this.playDoubleHitAnim("ZYX_wenzi_2");break;case 3:this.playDoubleHitAnim("ZYX_wenzi_3");break;case 4:this.playDoubleHitAnim("ZYX_wenzi_4");break;case 5:this.playDoubleHitAnim("ZYX_wenzi_5");break;case 6:this.playDoubleHitAnim("ZYX_wenzi_6");break;case 7:this.playDoubleHitAnim("ZYX_wenzi_7");break;case 8:this.playDoubleHitAnim("ZYX_wenzi_8");break;case 9:this.playDoubleHitAnim("ZYX_wenzi_9");break;case 0:this.playDoubleHitAnim("ZYX_wenzi_kaishi")}},playDoubleHitAnim:function(t){this._armatureDisPlay_1.animationName=t,this._armatureDisPlay_1.playAnimation(t,1)},createHammerAnim:function(t){if(!(t.length<=0))for(var e=0;e<t.length;e++){var i=cc.instantiate(this.propHammer);i.getComponent("hx_hammerKeel").onInit(),i.x=t[e].pos.x,i.y=t[e].pos.y-20,this.node.addChild(i)}},createBirdAnim:function(t){this.ctrlMusicScript.playBirdFly();var e=t.concat();if(!(e.length<=0))for(var i=0;i<e.length;i++){var o=cc.instantiate(this.propBird),a=cc.v2(0,0);1==e[i].blockLength?(a.x=e[i].pos.x-30,a.y=e[i].pos.y):3==e[i].blockLength?(a.x=e[i].pos.x+33,a.y=e[i].pos.y):4==e[i].blockLength?(a.x=e[i].pos.x+66,a.y=e[i].pos.y):a=e[i].pos,o.getComponent("hx_birdAnim").onInit(e[i].blockColor,a),o.x=-190,o.y=476,this.node.addChild(o)}},createParticleAnim:function(t,e,i){var o=this;if(void 0===i&&(i=1),0!=t.length){var a=t.concat();if(!(a.length<=0))for(var n=function(){var n=cc.instantiate(o.particlePref),s=cc.v2(0,0);1==a[c].blockLength?(s.x=a[c].pos.x,s.y=a[c].pos.y-66):3==a[c].blockLength?(s.x=a[c].pos.x+66,s.y=a[c].pos.y-66):4==a[c].blockLength?(s.x=a[c].pos.x+99,s.y=a[c].pos.y-66):(s.x=a[c].pos.x+33,s.y=a[c].pos.y-66),n.x=s.x,n.y=s.y;var h=null;h=1==i?e:c==a.length-1?e:null,n.getComponent("hx_particleBox").onInit(t[c].blockLength,function(){h&&h()}.bind(o)),o.node.addChild(n)},c=0;c<a.length;c++)n()}else e&&e()},mouthActionInit:function(){null!=this._armatureDisPlay_mouth&&null!=this._armature_mouth||(this._armatureDisPlay_mouth=this.mouthNode.getComponent(dragonBones.ArmatureDisplay),this._armature_mouth=this._armatureDisPlay_mouth.armature())},playMouth:function(t){switch(t){case 1:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay_mouth,"ZYX_zui_yao",0);break;case 2:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay_mouth,"ZYX_zui_jing",0);break;case 3:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay_mouth,"ZYX_zui_zhang",0)}},createCloud:function(){this.myBgNode&&this.myBgNode.getComponent("hx_BgCloud").onInit()},createGuide:function(t){var e=cc.instantiate(this.guidePref),i=function(){this.resetGame()}.bind(this);e.getComponent("hx_noviceGuide").onInit(t,i),this.node.addChild(e)},startGameAnim:function(t){this.showStartBox(!0),this.startAnimInit(),this.playKeelCb=t;var e=function(){this.isShowDoubleHit(!0),this.selectDoubleHitAnim(0)}.bind(this);if(this.historyTipsLabel&&g_hx_AnimationManage.startAnim(this.historyTipsLabel,cc.v2(-495,61),cc.v2(0,61),.1,null),this.historyScoreLabel){var i=g_hx_localData.getHistoryHighScore();this.historyScoreLabel.getComponent(cc.Label).string=i.toString(),g_hx_AnimationManage.startAnim(this.historyScoreLabel,cc.v2(495,-23),cc.v2(0,-23),.1,e)}},showStartBox:function(t){this.startAnimBox&&(this.startAnimBox.active=t)},startAnimInit:function(){this.historyTipsLabel&&(this.historyTipsLabel.active=!1),this.historyScoreLabel&&(this.historyScoreLabel.active=!1),this.startNode&&(this.startNode.active=!1),this.holdBlock&&(this.holdBlock.hideBlockBg(),this.holdBlock.setnBeamHide())},createLightningPref:function(t,e,i){var o=cc.instantiate(this.lightningPref),a=cc.v2(t.x,t.y-26);o.x=a.x,o.y=a.y,o.getComponent("hx_lightning").onInit(e,i),this.node.addChild(o)},clickToMiniGame:function(){g_hx_sdk.toMiniProgram()}}),cc._RF.pop()},{}],hx_LGame:[function(t,e){"use strict";cc._RF.push(e,"bd9cf2C6J9OEKLlzmBhyoza","hx_LGame"),e.exports={SCROE_TITLE:{1:"\u5f97\u5206",2:"\u8fde\u51fb",3:"\u6f02\u4eae",4:"\u592a\u68d2\u4e86",5:"\u8d85\u5389\u5bb3",6:"\u771f\u75af\u72c2",7:"\u6211\u7684\u5929\u554a",8:"\u662f\u771f\u7684\u5417",9:"\u96be\u4ee5\u81f3\u4fe1",10:"\u5929\u795e\u4e0b\u51e1"}},cc._RF.pop()},{}],hx_LibsGrid:[function(t,e){"use strict";cc._RF.push(e,"31941sweqpCx6j0WSRL9Skw","hx_LibsGrid"),cc.Class({extends:cc.Component,properties:{GRIDARRAY:[],GridPref:{type:cc.Prefab,default:null}},onInit:function(){this.getGridArray()},getArray:function(){return Array(g_hx_gridData.ROWS*g_hx_gridData.COLS)},getGridArray:function(){this.GRIDARRAY=[];for(var t=0;t<g_hx_gridData.ROWS;t++){this.GRIDARRAY[t]=new Array;for(var e=0;e<g_hx_gridData.COLS;e++){var i=this.getGridPos(t,e),o=this.getGridType(t,e),a=this.createGrid(cc.v2(i.x,i.y),o);this.GRIDARRAY[t][e]={type:o,isUsed:0,pos:cc.v2(i.x,i.y),node:a}}}},getGridPos:function(t,e){return{x:e*g_hx_gridData.GIRDWIDTH-265+.5*e,y:t*g_hx_gridData.GIRDHEIGHT-364+.5*t}},createGrid:function(t,e){var i=cc.instantiate(this.GridPref);return i.getComponent("hx_girds").onInit(e),i.x=t.x,i.y=t.y,i},getGridType:function(t,e){var i=t%2,o=0;return 0==i?o=e%2==0?0:1:1==i?o=e%2==0?1:0:console.log("\u4e0d\u53ef\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684\uff01"),o},resetGridArray:function(){for(var t in this.GRIDARRAY)if(this.GRIDARRAY.hasOwnProperty(t))for(var e in this.GRIDARRAY[t])this.GRIDARRAY[t].hasOwnProperty(e)&&this.GRIDARRAY[t][e]&&(this.GRIDARRAY[t][e].isUsed=0);return this.GRIDARRAY}}),cc._RF.pop()},{}],hx_LocalData:[function(t,e){"use strict";cc._RF.push(e,"02889InsrNINY51Wsob9n6r","hx_LocalData");var i=!1,o=!1,a={saveLocalData:function(t,e){if(e){var i=JSON.stringify(e);g_hx_sdk.setStorage(t,i)}},saveMusicLocalData:function(t,e){this.savaMyLocalData(t,e)},savaMyLocalData:function(t,e){var i=JSON.stringify(e);g_hx_sdk.setStorage(t,i)},getLocalData:function(t,e){var i=g_hx_sdk.getStorage(t);return i?JSON.parse(i):e},_init:function(){o||(o=!0,this.initUserData(),this._isSoundClose=this.getLocalData("zyhx_soundState",!0),this.revivesNum=this.getRevivesNum(),this.birdColor=this.getBirdColor(),this.ejectPropUseNum=this.getActiveUsePropNum(),this.propNum=this.getPropNum(),this.noviceGuide=this.getNoviceGuide(),g_hx_commonData.musicCtrl=this._isSoundClose,console.log("\u4e92\u6d88\u521d\u59cb\u5316\u6570\u636e\uff1a",this._isSoundClose,this.zyhx_userdata))},initUserData:function(){this.zyhx_userdata={zyhxHighHistory:0,zyhxBlockData:[],zyhxHistoryScore:0};var t=this.getLocalData("zyhx_userdata",{});t&&""!==t&&(this.zyhx_userdata.zyhxHighHistory=t.zyhxHighHistory||0,this.zyhx_userdata.zyhxBlockData=t.zyhxBlockData||[],this.zyhx_userdata.zyhxHistoryScore=t.zyhxHistoryScore||0),this.preSendScore=this.zyhx_userdata.zyhxHighHistory,void 0===this._serverScore||i||this.compareUserData()},setHistroyWithSever:function(t){this._serverScore=t,this.zyhx_userdata&&this.compareUserData()},compareUserData:function(){i=!0,null==this._serverScore&&(this._serverScore=0),this.zyhx_userdata.zyhxHighHistory<=this._serverScore?(this.zyhx_userdata.zyhxHighHistory=this._serverScore,this.saveLocalData("zyhx_userdata",this.zyhx_userdata)):this.zyhx_userdata.zyhxHighHistory-this._serverScore>10&&this.sumbitScoreRank()},sumbitScoreRank:function(){console.log("\u5386\u53f2\u6700\u9ad8\u5206:",this.zyhx_userdata.zyhxHighHistory);var t={zyhxHighHistory:this.zyhx_userdata.zyhxHighHistory};g_wanxArder.userinfos.onPostUserInfo_zyhx(t)},setIsSoundClose:function(t){this._isSoundClose=t,this.saveMusicLocalData("zyhx_soundState",this._isSoundClose)},getIsSoundClose:function(){return!!this._isSoundClose},setHistoryBlockData:function(t,e){this.zyhx_userdata.zyhxBlockData=t,this.zyhx_userdata.zyhxHistoryScore=e,this.saveLocalData("zyhx_userdata",this.zyhx_userdata)},getHistoryBlockData:function(){return this.zyhx_userdata},setHistoryHighScore:function(t){t>this.zyhx_userdata.zyhxHighHistory&&(this.zyhx_userdata.zyhxHighHistory=t),console.log("\u6700\u9ad8\u5206\u6570\uff1a",this.zyhx_userdata.zyhxHighHistory),this.compareUserData()},getHistoryHighScore:function(){return this.zyhx_userdata.zyhxHighHistory},setRevivesNum:function(t){this.revivesNum=t,this.savaMyLocalData("zyhx_revivesNum",this.revivesNum)},getRevivesNum:function(){return this.getLocalData("zyhx_revivesNum",0)},setBirdColor:function(t){this.birdColor=t,this.savaMyLocalData("zyhx_propBirdColor",this.birdColor)},getBirdColor:function(){var t=Math.floor(6*Math.random());return this.getLocalData("zyhx_propBirdColor",t)},setBirdNum:function(t,e){void 0===e&&(e=1),1==e?this.propNum.bird=t:this.propNum.bird++,this.setPropNum()},setHammerNum:function(t,e){void 0===e&&(e=1),1==e?this.propNum.hammner=t:this.propNum.hammner++,this.setPropNum()},setPropNum:function(){this.savaMyLocalData("zyhx_canUsePropNum",this.propNum)},getPropNum:function(){return this.getLocalData("zyhx_canUsePropNum",{hammner:1,bird:1})},setActiveUsePropNum:function(t){this.ejectPropUseNum=t,this.savaMyLocalData("zyhx_ejectPropUseNum",this.ejectPropUseNum)},getActiveUsePropNum:function(){return this.getLocalData("zyhx_ejectPropUseNum",0)},setNoviceGuide:function(t){this.noviceGuide=t,this.savaMyLocalData("zyhx_noviceGuide",this.noviceGuide)},getNoviceGuide:function(){return this.getLocalData("zyhx_noviceGuide",!0)}};e.exports=a,cc._RF.pop()},{}],hx_Mgr:[function(t,e){"use strict";cc._RF.push(e,"2c0472Z3DNBe6pMH5AOkV3+","hx_Mgr"),window.hx_Data=t("hx_GameData"),window.g_hx_gridData=hx_Data.hx_gridData,window.g_hx_gameData=hx_Data.hx_gameData,window.g_hx_actionTime=hx_Data.hx_actionTime,window.g_hx_gameState=hx_Data.hx_gameState,window.g_hx_costDiamonds=hx_Data.hx_costDiamonds,window.g_hx_needCtrlData=hx_Data.hx_needCtrlData,window.g_hx_testAnimLastPlay=hx_Data.hx_testAnimLastPlay,window.g_hx_cloudData=hx_Data.hx_cloudData,window.g_hx_violetBlockData=hx_Data.hx_violetBlockData,window.g_hx_LGame=t("hx_LGame"),window.g_hx_localData=t("hx_LocalData"),window.hx_Rows=t("hx_RowsData"),window.g_hx_RowsData=hx_Rows.hx_RowsData,window.g_hx_RowsData_1=hx_Rows.hx_RowsData_1,window.g_hx_commonData=t("hx_CommonData"),window.g_hx_CommonFunc=t("hx_CommonFunc"),window.g_hx_AnimationManage=t("hx_AnimationManage"),window.g_hx_sdk=t("sdk"),cc._RF.pop()},{hx_AnimationManage:"hx_AnimationManage",hx_CommonData:"hx_CommonData",hx_CommonFunc:"hx_CommonFunc",hx_GameData:"hx_GameData",hx_LGame:"hx_LGame",hx_LocalData:"hx_LocalData",hx_RowsData:"hx_RowsData",sdk:void 0}],hx_NodePool:[function(t,e){"use strict";cc._RF.push(e,"f72f4MMXHRDbqDCJ/O/u5Kh","hx_NodePool");var i=0,o=cc.Class({extends:cc.Component,properties:{poolList:[]},addPool:function(t,e){var o=new cc.NodePool(t),a={name:t,id:i,pool:o,prb:e,nodeID:0,allNodeScr:{}};return i++,this.poolList.push(a),a},getNodeScr:function(t){var e=this.findPoolData(t),i=e.pool,o=(i.size()>0?i.get():cc.instantiate(e.prb)).getComponent(t);return o.id=null==o.id?e.nodeID++:o.id,e.allNodeScr[o.id]=o,o},findPoolData:function(t){for(var e=0;e<this.poolList.length;e++){if(this.poolList[e].name==t)return this.poolList[e];if(e==this.poolList.length-1)return console.log("\u6ca1\u627e\u5230\u8be5\u5bf9\u8c61\u6c60"),null}},clearNode:function(t,e){var i=this.findPoolData(t);if(null!=i){var o=i.pool,a=i.allNodeScr[e];a&&(a.node&&(a.node.active=!1),this.scheduleOnce(function(){o.put(a.node)}.bind(this),.01),i.allNodeScr[e]=null)}else console.error("\u6ca1\u6709\u627e\u5230\u8be5\u5bf9\u8c61")},clearAllNode:function(t){var e=this.findPoolData(t);for(var i in e.allNodeScr)if(e.allNodeScr.hasOwnProperty(i)){var o=e.allNodeScr[i];o&&(o.clear&&o.clear(),o.node&&(o.node.active=!1),this.clearNode(t,o.id))}e.allNodeScr={}},clearAll:function(){for(var t=0;t<this.poolList.length;t++)this.clearAllNode(this.poolList[t].name)},clearPoolList:function(){this.poolList=[]}});o._instance,o.getInstance=function(){return this._instance||(this._instance=this._instance||new o),this._instance},window.hx_NodePool=o,cc._RF.pop()},{}],hx_Prop:[function(t,e){"use strict";cc._RF.push(e,"ebf26wyXJZNKKF223P/XgGH","hx_Prop"),cc.Class({extends:cc.Component,properties:{birdPropLabel:cc.Label,hammerPropLabel:cc.Label,videoUsePropPref:cc.Prefab,videoUseProp:null,videoUsePropScript:null,bird0:cc.Node,bird1:cc.Node,bird2:cc.Node,bird3:cc.Node,bird4:cc.Node,bird5:cc.Node,birdType:0,parentNode:null},onLoad:function(){g_oEvent.addEventListener(g_tEvent.UPDATE_PROP_NUM,function(){var t=g_hx_localData.getPropNum();this.birdPropNumShow(t.bird),this.hammerPropNumShow(t.hammner)}.bind(this))},onDestroy:function(){g_oEvent.removeEventListener(g_tEvent.UPDATE_PROP_NUM)},onInit:function(t,e){this.parentNode=t,this.gameScript=e,this.chanceBird(),this.addPropPref();var i=g_hx_localData.getPropNum();this.birdPropNumShow(i.bird),this.hammerPropNumShow(i.hammner)},clickHammerSkill:function(){var t=this;if(console.log("click! hammer"),g_hx_gameData.isCanMoveUp){var e=g_hx_localData.getPropNum();if(console.log(e,"prophamner====="),e.hammner>0){g_hx_gameData.isCanMoveUp=!1;var i=function(){e.hammner--,this.hammerPropNumShow(e.hammner),g_hx_localData.setHammerNum(e.hammner)}.bind(this);this.gameScript.ctrlMusicScript.playHammer(),this.hammerSkill(i)}else g_wxPlat.showVideoAd(function(){t.gameScript.ctrlMusicScript.playHammer(),t.hammerSkill()},function(){Tips.showToast("\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")})}},clickBirdSkill:function(){console.log("click! bird");var t=this;if(this.chanceBird(),g_hx_gameData.isCanMoveUp){var e=g_hx_localData.getPropNum();if(console.log(e,"prop====="),e.bird>0){g_hx_gameData.isCanMoveUp=!1;var i=function(){e.bird--;var t=g_hx_localData.getBirdColor();g_hx_localData.setBirdColor(t),this.chanceBird(),this.birdPropNumShow(e.bird),g_hx_localData.setBirdNum(e.bird)}.bind(this);this.birdSkill(i)}else g_wxPlat.showVideoAd(function(){t.birdSkill()},function(){Tips.showToast("\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")})}},chanceBird:function(){this.birdType=g_hx_localData.getBirdColor(),this.showBird(this.birdType)},showBird:function(t){switch(this.hideAllBird(),t){case 0:this.bird0.active=!0;break;case 1:this.bird1.active=!0;break;case 2:this.bird2.active=!0;break;case 3:this.bird3.active=!0;break;case 4:this.bird4.active=!0;break;case 5:this.bird5.active=!0}},hideAllBird:function(){this.bird0.active=!1,this.bird1.active=!1,this.bird2.active=!1,this.bird3.active=!1,this.bird4.active=!1,this.bird5.active=!1},addPropPref:function(){this.videoUseProp=cc.instantiate(this.videoUsePropPref),this.videoUsePropScript=this.videoUseProp.getComponent("hx_videoUseProp"),this.parentNode.addChild(this.videoUseProp),this.videoUseProp.active=!1},ejectPropUse:function(){var t=g_hx_localData.getPropNum();1==(t.hammner>0&&t.bird>0||t.hammner<=0&&t.bird<=0?Math.ceil(2*Math.random()):t.hammner>0&&t.bird<=0?1:t.hammner<=0&&t.bird>0?2:Math.ceil(2*Math.random()))?this.ejectHammerSkill():this.ejectBirdSkill()},ejectHammerSkill:function(){if(console.log("click! hammer"),g_hx_gameData.isCanMoveUp){console.log("g_hx_gameData.isCanMoveUp:",g_hx_gameData.isCanMoveUp);var t=g_hx_localData.getPropNum();if(t.hammner>0){g_hx_gameData.isCanMoveUp=!1;var e=function(){t.hammner--,this.hammerPropNumShow(t.hammner),g_hx_localData.setHammerNum(t.hammner)}.bind(this),i=function(){this.gameScript.ctrlMusicScript.playHammer(),this.hammerSkill(e)}.bind(this),o=function(){g_hx_gameData.isCanMoveUp=!0}.bind(this);this.showPropPref(1,i,o,2)}else{g_hx_gameData.isCanMoveUp=!1;var a=function(){this.gameScript.ctrlMusicScript.playHammer(),this.hammerSkill()}.bind(this),n=function(){g_hx_gameData.isCanMoveUp=!0}.bind(this);this.showPropPref(1,a,n,2)}}},ejectBirdSkill:function(){if(console.log("click! bird"),this.chanceBird(),g_hx_gameData.isCanMoveUp){console.log("g_hx_gameData.isCanMoveUp:",g_hx_gameData.isCanMoveUp);var t=g_hx_localData.getPropNum();if(t.bird>0){g_hx_gameData.isCanMoveUp=!1;var e=function(){t.bird--;var e=g_hx_localData.getBirdColor();g_hx_localData.setBirdColor(e),this.chanceBird(),this.birdPropNumShow(t.bird),g_hx_localData.setBirdNum(t.bird)}.bind(this),i=function(){this.birdSkill(e)}.bind(this),o=function(){g_hx_gameData.isCanMoveUp=!0}.bind(this);this.showPropPref(2,i,o,2)}else{g_hx_gameData.isCanMoveUp=!1;var a=function(){this.birdSkill()}.bind(this),n=function(){g_hx_gameData.isCanMoveUp=!0}.bind(this);this.showPropPref(2,a,n,2)}}},showPropPref:function(t,e,i,o){void 0===o&&(o=1),this.videoUseProp.active=!0,this.videoUsePropScript.onInit(t,e,i,o)},birdPropNumShow:function(t){this.birdPropLabel&&(this.birdPropLabel.string=t.toString())},hammerPropNumShow:function(t){this.hammerPropLabel&&(this.hammerPropLabel.string=t.toString())},birdSkill:function(t){void 0===t&&(t=null),this.gameScript.holdBlock.usePropBird(t)},hammerSkill:function(t){void 0===t&&(t=null),this.gameScript.holdBlock.usePropHammer(t)},update:function(){if(g_hx_gameData.isStartCheck){var t=g_hx_localData.getBirdColor();if(this.gameScript&&this.gameScript.holdBlock){var e=this.gameScript.holdBlock.getBlockMostColor().frist;t!=e&&(null!=e&&null!=e||(e=0),g_hx_localData.setBirdColor(e),this.showBird(e))}}}}),cc._RF.pop()},{}],hx_RowsData:[function(t,e,i){"use strict";cc._RF.push(e,"e8b2bWLBt5HRJcelCbng1oz","hx_RowsData"),i.hx_RowsData={blockRowsData_3:[[1,0,1,0,0,0,0,0,1],[0,1,0,2,0,0,0,0],[0,0,3,0,0,0,0]],blockRowsData_4:[[1,0,1,0,0,0,0,1,1],[1,0,2,0,0,0,1,0],[1,0,3,0,0,0,0],[0,0,4,0,0,0],[2,0,2,0,0,0,0]],blockRowsData_5:[[1,0,1,1,0,1,0,0,1],[1,0,1,0,2,0,1,0],[1,0,1,0,3,0,0],[1,0,0,4,0,0],[1,0,2,0,0,0,2],[2,0,0,0,0,3]],blockRowsData_6:[[1,0,1,1,0,1,1,0,1],[1,0,1,0,1,0,1,2],[1,0,1,0,1,0,3],[1,0,2,0,1,0,2],[1,0,4,0,1,0],[1,0,2,0,0,3],[2,0,2,0,2,0],[2,0,0,0,4],[3,0,0,0,3]],blockRowsData_7:[[1,2,1,1,0,1,1,0],[1,0,3,1,1,1,0],[4,0,1,1,1,0],[1,0,1,1,0,2,2],[2,0,1,1,0,3],[1,0,4,2,0],[2,0,1,2,0,2],[3,0,1,0,3],[2,0,2,0,3],[3,0,0,4]],blockRowsData_8:[[3,1,1,1,1,1,0],[4,1,1,1,1,0],[2,1,1,1,1,2,0],[3,1,1,1,2,0],[2,1,1,0,4],[3,1,1,3,0],[2,1,2,2,0,1],[4,1,3,0],[2,1,3,0,2],[3,2,3,0],[2,0,2,4],[4,4,0],[2,2,0,2,2]]},i.hx_RowsData_1={blockRowsData_3:[[1,0,1,0,0,0,0,0,1],[0,1,0,2,0,0,0,0],[0,0,3,0,0,0,0]],blockRowsData_4:[[1,0,1,0,0,0,0,1,1],[1,0,2,0,0,0,1,0],[1,0,3,0,0,0,0],[2,0,2,0,0,0,0]],blockRowsData_5:[[1,0,1,1,0,1,0,0,1],[1,0,1,0,2,0,1,0],[1,0,1,0,3,0,0],[1,0,2,0,0,0,2],[2,0,0,0,0,3]],blockRowsData_6:[[1,0,1,1,0,1,1,0,1],[1,0,1,0,1,0,1,2],[1,0,1,0,1,0,3],[1,0,2,0,1,0,2],[1,0,2,0,0,3],[2,0,2,0,2,0],[3,0,0,0,3]],blockRowsData_7:[[1,2,1,1,0,1,1,0],[1,0,3,1,1,1,0],[1,0,1,1,0,2,2],[2,0,1,1,0,3],[2,0,1,2,0,2],[3,0,1,0,3],[2,0,2,0,3]],blockRowsData_8:[[3,1,1,1,1,1,0],[2,1,1,1,1,2,0],[3,1,1,1,2,0],[3,1,1,3,0],[2,1,2,2,0,1],[2,1,3,0,2],[3,2,3,0],[2,2,0,2,2]]},cc._RF.pop()},{}],hx_birdAnim:[function(t,e){"use strict";cc._RF.push(e,"fcdd6fen2hP7btXJOdlhZZd","hx_birdAnim"),cc.Class({extends:cc.Component,properties:{bird_1:cc.Node,bird_2:cc.Node,bird_3:cc.Node,bird_4:cc.Node,bird_5:cc.Node,bird_6:cc.Node,animNode:cc.Node,smokeAnimNode:cc.Node},onInit:function(t,e){this.showBird(t),this.showAnimNode(!1),this.showSmokeAnim(!1),g_hx_AnimationManage.birdFlyAction(this.node,e,function(){}.bind(this),function(){this.playAnim()}.bind(this),function(){this.hideBirdAndLight(),this.playSmokeAnim()}.bind(this))},closePage:function(){this.node&&(this.node.active=!1)},showBird:function(t){switch(this.hideAll(),t){case 0:this.bird_1.active=!0;break;case 1:this.bird_2.active=!0;break;case 2:this.bird_3.active=!0;break;case 3:this.bird_4.active=!0;break;case 4:this.bird_5.active=!0;break;case 5:this.bird_6.active=!0}},hideAll:function(){this.bird_1.active=!1,this.bird_2.active=!1,this.bird_3.active=!1,this.bird_4.active=!1,this.bird_5.active=!1,this.bird_6.active=!1},update:function(){0==this.node.active&&this.node.destroy()},playAnim:function(){this.showAnimNode(!0),this.animNode&&this.animNode.getComponent(cc.Animation).play("ZYX_dansexiao_dianA")},showAnimNode:function(t){this.animNode&&(this.animNode.active=t)},hideBirdAndLight:function(){this.hideAll(),this.showAnimNode(!1)},showSmokeAnim:function(t){this.smokeAnimNode&&(this.smokeAnimNode.active=t)},playSmokeAnim:function(){this.showSmokeAnim(!0),this.smokeAnimNode&&(this.smokeAnimNode.getComponent(cc.Animation).play("ZYX_dansexiao_yanA"),this.smokeAnimNode.getComponent(cc.Animation).on("finished",function(){this.closePage()}.bind(this),this))}}),cc._RF.pop()},{}],hx_cloud:[function(t,e){"use strict";cc._RF.push(e,"24a71jW6tFDy7/asfCBkQ1/","hx_cloud"),cc.Class({extends:cc.Component,properties:{cloud_1:cc.Node,cloud_2:cc.Node,cloud_3:cc.Node,cloud_4:cc.Node,cloud_5:cc.Node,moveSpeed:null,startPos:null,endPos:null,posY:null,waitTime:null,isWait:!0},onInit:function(t,e,i,o,a,n){this.showCloud(t),this.moveSpeed=e,this.startPosX=i,this.endPosX=o,this.posY=a,this.waitTime=n},showCloud:function(t){switch(this.hideAllCloud(),t){case 0:this.cloud_1&&(this.cloud_1.active=!0);break;case 1:this.cloud_2&&(this.cloud_2.active=!0);break;case 2:this.cloud_3&&(this.cloud_3.active=!0);break;case 3:this.cloud_4&&(this.cloud_4.active=!0);break;case 4:this.cloud_5&&(this.cloud_5.active=!0)}},hideAllCloud:function(){this.cloud_1&&(this.cloud_1.active=!1),this.cloud_2&&(this.cloud_2.active=!1),this.cloud_3&&(this.cloud_3.active=!1),this.cloud_4&&(this.cloud_4.active=!1),this.cloud_5&&(this.cloud_5.active=!1)},destroyMyNode:function(){this.node&&this.node.destroy()},update:function(){this.node.x>=this.endPosX&&this.node.x<=this.startPosX?this.node.x-=this.moveSpeed:this.isWait&&(this.isWait=!1,g_hx_CommonFunc.useRunActionDelayed(this.node,this.waitTime,function(){this.node.x=this.startPosX,this.isWait=!0}.bind(this)))}}),cc._RF.pop()},{}],hx_continueGame:[function(t,e){"use strict";cc._RF.push(e,"3bbe4yppWJFLL5+ck5Jh7K5","hx_continueGame"),cc.Class({extends:cc.Component,properties:{historyScoreLabel:cc.Label,musicIconOpen:cc.Node,musicIconClose:cc.Node,cbFunc:null,cbFunc2:null,parentScript:null},onInit:function(t,e,i,o){g_hx_gameData.isStartCheck=!1,this.musicIcon(),this.cbFunc=t,this.cbFunc2=i,this.parentScript=o,this.historyScoreShow(e),this.node&&(this.node.zIndex=10)},clickRestartGame:function(){this.cbFunc&&this.cbFunc(),this.closePage()},clickContinueGame:function(){this.cbFunc2&&this.cbFunc2(),this.closePage()},clickBackHall:function(){this.parentScript.ctrlMusicScript.stopAll(),g_wanxArder.backToLobby()},clickCtrlMusic:function(){g_hx_commonData.musicCtrl=!g_hx_commonData.musicCtrl,console.log("g_hx_commonData.musicCtrl:",g_hx_commonData.musicCtrl),g_hx_localData.setIsSoundClose(g_hx_commonData.musicCtrl),0==g_hx_commonData.musicCtrl?this.parentScript.ctrlMusicScript.stopAll():this.parentScript.ctrlMusicScript.playBgm(),this.musicIcon()},closePage:function(){this.node&&(this.node.active=!1)},musicIcon:function(){g_hx_commonData.musicCtrl?this.musicIconClose.active=!1:this.musicIconClose.active=!0},historyScoreShow:function(t){this.historyScoreLabel&&(this.historyScoreLabel.string="\u4e0a\u6b21\u6e38\u620f\u6d88\u9664\u4e86"+t+"\u5206\uff0c\u662f\u5426\u7ee7\u7eed\uff1f")}}),cc._RF.pop()},{}],hx_fourBlocks:[function(t,e){"use strict";cc._RF.push(e,"79f97AdKyRKN4RJDV69rkg3","hx_fourBlocks"),cc.Class({extends:cc.Component,properties:{id:null,keelNode:cc.Node,violetLightning:cc.Node,_armatureDisPlay:null,_armature:null,touchStartPos:null,myBlocksColorType:null,blockNumType:4,myData:null,gameScript:null,startPos:null,movePos:null,lastPosX:null,myWidth:262,savaTimer:null,isSinglePoint:!1,moveTargetPos:null},onLoad:function(){this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this)},onInit:function(t,e,i){this.registerTouchEvent(),null!=this._armatureDisPlay&&null!=this._armature||(this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature()),this.myBlocksColorType=t,this.myData=e,this.gameScript=i,this.playBlocksAction(t),this.judgmentColorType(),this.playBlinkAction(),this.isSinglePoint=!1},destroyMyEvent:function(){this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this),g_hx_commonData.singlePointStartTouch=!1},completeEvent:function(){},onDestroy:function(){this.clearMyTimer(),this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this)},playBlocksAction:function(t){switch(t){case 0:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_4_jing",0);break;case 1:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_4_jing",0);break;case 2:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_4_jing",0);break;case 3:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_4_jing",0);break;case 4:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_4_jing",0);break;case 5:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_4_jing",0)}},getBlocksColorType:function(){return this.myBlocksColorType},getBlocksNumType:function(){return this.blockNumType},updateMyData:function(t){this.myData=t},registerTouchEvent:function(){this.node.on("touchstart",this.touchStart.bind(this),this),this.node.on("touchmove",this.touchMove.bind(this),this),this.node.on("touchend",this.touchFinish.bind(this),this),this.node.on("touchcancel",this.touchFinish.bind(this),this)},touchStart:function(t){g_hx_commonData.singlePointStartTouch||(this.isSinglePoint=!0,g_hx_commonData.singlePointStartTouch=!0,this.gameScript.backBlocksInfo(this.myData),this.startPos=cc.v2(t.target.x,t.target.y),this.touchStartPos=cc.v2(this.myData.pos.x,this.myData.pos.y),g_hx_gameData.isCanMoveUp&&(this.gameScript.showBgBlockPos(4,this.myData.blockColor,this.node.x+98,this.node.y-67),this.gameScript.showBeamPos(this.node.x+98,this.myWidth)))},touchMove:function(t){if(0!=this.isSinglePoint&&g_hx_gameData.isCanMoveUp&&-1!=g_hx_commonData.touchInfo.state){this.movePos=cc.v2(t.currentTouch._point.x,t.currentTouch._point.y);var e=this.node.parent.convertToNodeSpaceAR(this.movePos);e.x>=g_hx_commonData.touchInfo.min.x&&e.x<=g_hx_commonData.touchInfo.max.x?(this.node.x=e.x,this.lastPosX=e.x,this.gameScript.showBeamPos(e.x+98,this.myWidth)):e.x<g_hx_commonData.touchInfo.min.x?(this.node.x=g_hx_commonData.touchInfo.min.x,this.lastPosX=g_hx_commonData.touchInfo.min.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.min.x+98,this.myWidth)):e.x>g_hx_commonData.touchInfo.max.x?(this.node.x=g_hx_commonData.touchInfo.max.x,this.lastPosX=g_hx_commonData.touchInfo.max.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.max.x+98,this.myWidth)):console.log("\u4e0d\u53ef\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684")}},touchFinish:function(){if(0!=this.isSinglePoint){if(g_hx_gameData.isCanMoveUp){g_hx_gameData.isCanMoveUp=!1,g_hx_gameData.doubleHitNum=0,this.gameScript.setnBeamHide(),this.gameScript.hideBlockBg();var t=this.gameScript.comparisonPos(this.lastPosX);if(null!=t){this.updateMyNodePos(t.pos);var e=this.gameScript.touchEndchangeData(this.myData,t);this.updateMyData(e),this.touchStartPos.x==t.pos.x?g_hx_gameData.isCanMoveUp=!0:(g_hx_gameState.touchEndCancelState=1,this.gameScript.blocksDown())}else console.log("test info  == null  "),g_hx_gameData.isCanMoveUp=!0}g_hx_commonData.singlePointStartTouch=!1,this.isSinglePoint=!1}},updateMyNodePos:function(t){this.node.x=t.x},playBlinkAction:function(){this.clearMyTimer(),this.savaTimer=setInterval(function(){Math.random()<=g_hx_actionTime.BLINK_RATE&&this.blinkAction(this.myBlocksColorType)}.bind(this),g_hx_actionTime.BLINK_INTERVAL)},clearMyTimer:function(){clearInterval(this.savaTimer),this.savaTimer=null},blinkAction:function(t){if(null!=this.node&&0!=this.node.active){var e=Math.random()>=.5;switch(t){case 0:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_fen_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_4_yan_up",1);break;case 1:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lan_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_4_yan_up",1);break;case 2:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_huang_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_4_yan_up",1);break;case 3:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_hong_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_4_yan_up",1);break;case 4:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lv_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_4_yan_up",1);break;case 5:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_zi_4",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_4_yan_up",1)}}else this.clearMyTimer()},judgmentColorType:function(){5==this.myBlocksColorType?this.showHideLighting(!0):this.showHideLighting(!1)},showHideLighting:function(t){this.violetLightning&&(this.violetLightning.active=t)}}),cc._RF.pop()},{}],hx_gameFail:[function(t,e){"use strict";cc._RF.push(e,"9e2c3LxZEpADpeSVs67cQFs","hx_gameFail"),cc.Class({extends:cc.Component,properties:{nowScore:cc.Label,historyScore:cc.Label,cbFunc:null,parentScript:null},onInit:function(t,e,i){g_hx_localData.sumbitScoreRank(),g_hx_localData.setRevivesNum(0),g_hx_localData.setActiveUsePropNum(0);var o=g_hx_localData.getHistoryHighScore();this.cbFunc=t,this.parentScript=i,this.historyScoreShow(o),this.nowScoreShow(e),g_hx_localData.setHistoryBlockData([],0),this.parentScript.updateScoreShow(1,0),0==g_hx_needCtrlData.isAlreadyEjectVideo&&this.ejectInsertAd(),this.node&&(this.node.zIndex=13)},clickRestartGame:function(){this.cbFunc&&this.cbFunc(),this.closePage()},clickBackHall:function(){this.parentScript.ctrlMusicScript.stopAll(),g_wanxArder.backToLobby()},closePage:function(){this.node&&(this.node.active=!1)},historyScoreShow:function(t){this.historyScore&&(this.historyScore.string="\u5386\u53f2\u9ad8\u5206 : "+t.toString())},nowScoreShow:function(t){this.nowScore&&(this.nowScore.string=t.toString())},ejectInsertAd:function(){}}),cc._RF.pop()},{}],hx_girds:[function(t,e){"use strict";cc._RF.push(e,"27fefblE+JM4YX5zKOvFaG1","hx_girds"),cc.Class({extends:cc.Component,properties:{grid_1:{type:cc.Node,default:null},grid_2:{type:cc.Node,default:null}},onInit:function(t){this.grid_1.active=0==t,this.grid_2.active=1==t}}),cc._RF.pop()},{}],hx_hammerKeel:[function(t,e){"use strict";cc._RF.push(e,"c0defw1MQ1PI7pPhDwyNwyv","hx_hammerKeel"),cc.Class({extends:cc.Component,properties:{_armatureDisPlay_1:null,_armature_1:null},onInit:function(){null!=this._armatureDisPlay_1&&null!=this._armature_1||(this._armatureDisPlay_1=this.node.getComponent(dragonBones.ArmatureDisplay),this._armature_1=this._armatureDisPlay_1.armature(),this._armatureDisPlay_1.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this),this._armatureDisPlay_1.animationName="daoju_chuizi",this._armatureDisPlay_1.playAnimation("daoju_chuizi",1))},completeEvent:function(){this.closePage()},closePage:function(){this.node&&this.node.destroy()}}),cc._RF.pop()},{}],hx_lightning:[function(t,e){"use strict";cc._RF.push(e,"3b8c8sASxFLWqcBIZmEFceR","hx_lightning"),cc.Class({extends:cc.Component,properties:{lightingNode:cc.Node},onInit:function(t,e){this.setWidthAndRotation(t,e),this.setWaitTime()},setWidthAndRotation:function(t,e){if(this.lightingNode){var i=t/210;this.lightingNode.scaleX=i,this.lightingNode.rotation=e}},setWaitTime:function(){g_hx_CommonFunc.useRunActionDelayed(this.node,1.2,function(){this.closePage()}.bind(this))},closePage:function(){this.node&&this.node.destroy()}}),cc._RF.pop()},{}],hx_noviceGuide:[function(t,e){"use strict";cc._RF.push(e,"73029G9bAVB97vaoE4eWhzC","hx_noviceGuide"),cc.Class({extends:cc.Component,properties:{firstStepNode:cc.Node,twoStepNode:cc.Node,threeStepNode:cc.Node,handNode:cc.Node,maskNode:cc.Node,cbFunc:null,dataArr:null},onInit:function(t,e){this.dataArr=t,this.cbFunc=e,g_hx_gameData.isStartCheck=!1,g_hx_gameData.isGuideOpen=!0,this.showFirstStepNode(!1),this.showTwoStepNode(!0),this.showThreeStepNode(!1),this.clickFirstStep(),this.node&&(this.node.zIndex=15),this.playHandAction()},showFirstStepNode:function(t){this.firstStepNode&&(this.firstStepNode.active=t)},showTwoStepNode:function(t){this.twoStepNode&&(this.twoStepNode.active=t)},showThreeStepNode:function(t){this.threeStepNode&&(this.threeStepNode.active=t)},clickFirstStep:function(){this.showFirstStepNode(!1),this.showTwoStepNode(!0),this.maskAddEventer()},clickTwoStep:function(){},clickThreeStep:function(){this.closePage()},closePage:function(){g_hx_gameData.isGuideOpen=!1,this.node&&this.node.destroy(),this.cbFunc&&this.cbFunc()},update:function(){g_hx_gameData.isShowThreeStep&&(g_hx_gameData.isShowThreeStep=!1,this.showFirstStepNode(!1),this.showTwoStepNode(!1),this.showThreeStepNode(!0)),this.handNode&&(this.handNode.active=g_hx_gameData.isCanMoveUp)},playHandAction:function(){g_hx_AnimationManage.guideAction(1.5,161,-410,0,-410,this.handNode)},maskAddEventer:function(){this.maskNode&&(this.maskNode.on("touchstart",this.touchStart.bind(this),this),this.maskNode.on("touchmove",this.touchMove.bind(this),this),this.maskNode.on("touchend",this.touchFinish.bind(this),this),this.maskNode.on("touchcancel",this.touchFinish.bind(this),this))},onDestroy:function(){},touchStart:function(t){this.dataArr[1][1].nodeJs.touchStart(t)},touchMove:function(t){this.dataArr[1][1].nodeJs.touchMove(t)},touchFinish:function(t){this.dataArr[1][1].nodeJs.touchFinish(t),this.destroyEvent(),this.handNode&&(this.handNode.active=!1)},destroyEvent:function(){this.maskNode&&(this.maskNode.on("touchstart",this.touchStart.bind(this),this),this.maskNode.on("touchmove",this.touchMove.bind(this),this),this.maskNode.on("touchend",this.touchFinish.bind(this),this),this.maskNode.on("touchcancel",this.touchFinish.bind(this),this))}}),cc._RF.pop()},{}],hx_oneBlocks:[function(t,e){"use strict";cc._RF.push(e,"384f3bebIdGGKgwF75soJY1","hx_oneBlocks"),cc.Class({extends:cc.Component,properties:{id:null,keelNode:cc.Node,violetLightning:cc.Node,_armatureDisPlay:null,_armature:null,touchStartPos:null,myBlocksColorType:null,blockNumType:1,myData:null,gameScript:null,startPos:null,movePos:null,lastPosX:null,myWidth:64,savaTimer:null,isSinglePoint:!1,moveTargetPos:null},onLoad:function(){this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this)},onInit:function(t,e,i){this.registerTouchEvent(),null!=this._armatureDisPlay&&null!=this._armature||(this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature()),this.myBlocksColorType=t,this.myData=e,this.gameScript=i,this.playBlocksAction(t),this.judgmentColorType(),this.playBlinkAction(),this.isSinglePoint=!1},completeEvent:function(){},onDestroy:function(){this.clearMyTimer(),this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this)},destroyMyEvent:function(){this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this),g_hx_commonData.singlePointStartTouch=!1},playBlocksAction:function(t){switch(t){case 0:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_1_jing",0);break;case 1:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_1_jing",0);break;case 2:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_1_jing",0);break;case 3:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_1_jing",0);break;case 4:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_1_jing",0);break;case 5:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_1_jing",0)}},getBlocksColorType:function(){return this.myBlocksColorType},getBlocksNumType:function(){return this.blockNumType},updateMyData:function(t){this.myData=t},registerTouchEvent:function(){this.node.on("touchstart",this.touchStart.bind(this),this),this.node.on("touchmove",this.touchMove.bind(this),this),this.node.on("touchend",this.touchFinish.bind(this),this),this.node.on("touchcancel",this.touchFinish.bind(this),this)},touchStart:function(t){g_hx_commonData.singlePointStartTouch||(this.isSinglePoint=!0,g_hx_commonData.singlePointStartTouch=!0,this.gameScript.backBlocksInfo(this.myData),this.startPos=cc.v2(t.target.x,t.target.y),this.touchStartPos=cc.v2(this.myData.pos.x,this.myData.pos.y),g_hx_gameData.isCanMoveUp&&(this.gameScript.showBgBlockPos(1,this.myData.blockColor,this.node.x,this.node.y-67),this.gameScript.showBeamPos(this.node.x,this.myWidth)))},touchMove:function(t){if(0!=this.isSinglePoint&&g_hx_gameData.isCanMoveUp&&-1!=g_hx_commonData.touchInfo.state){this.movePos=cc.v2(t.currentTouch._point.x,t.currentTouch._point.y);var e=this.node.parent.convertToNodeSpaceAR(this.movePos);e.x>=g_hx_commonData.touchInfo.min.x&&e.x<=g_hx_commonData.touchInfo.max.x?(this.node.x=e.x,this.lastPosX=e.x,this.gameScript.showBeamPos(e.x,this.myWidth)):e.x<g_hx_commonData.touchInfo.min.x?(this.node.x=g_hx_commonData.touchInfo.min.x,this.lastPosX=g_hx_commonData.touchInfo.min.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.min.x,this.myWidth)):e.x>g_hx_commonData.touchInfo.max.x?(this.node.x=g_hx_commonData.touchInfo.max.x,this.lastPosX=g_hx_commonData.touchInfo.max.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.max.x,this.myWidth)):console.log("\u4e0d\u53ef\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684")}},touchFinish:function(){if(0!=this.isSinglePoint){if(g_hx_gameData.isCanMoveUp){g_hx_gameData.isCanMoveUp=!1,g_hx_gameData.doubleHitNum=0,this.gameScript.setnBeamHide(),this.gameScript.hideBlockBg();var t=this.gameScript.comparisonPos(this.lastPosX);if(null!=t){this.updateMyNodePos(t.pos);var e=this.gameScript.touchEndchangeData(this.myData,t);this.updateMyData(e),this.touchStartPos.x==t.pos.x?g_hx_gameData.isCanMoveUp=!0:(g_hx_gameState.touchEndCancelState=1,this.gameScript.blocksDown())}else console.log("test info  == null  "),g_hx_gameData.isCanMoveUp=!0}g_hx_commonData.singlePointStartTouch=!1,this.isSinglePoint=!1}},updateMyNodePos:function(t){this.node.x=t.x},playBlinkAction:function(){this.clearMyTimer(),this.savaTimer=setInterval(function(){Math.random()<=g_hx_actionTime.BLINK_RATE&&this.blinkAction(this.myBlocksColorType)}.bind(this),g_hx_actionTime.BLINK_INTERVAL)},clearMyTimer:function(){clearInterval(this.savaTimer),this.savaTimer=null},blinkAction:function(t){if(null==this.node||0==this.node.active)return console.log("\u8282\u70b9\u9500\u6bc1 ,\u5b9a\u65f6\u4efb\u52a1\u53d6\u6d88"),void this.clearMyTimer();var e=Math.random()>=.5;switch(t){case 0:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_fen_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_1_yan_up",1);break;case 1:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lan_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_1_yan_up",1);break;case 2:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_huang_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_1_yan_up",1);break;case 3:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_hong_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_1_yan_up",1);break;case 4:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lv_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_1_yan_up",1);break;case 5:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_zi_1",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_1_yan_up",1)}},judgmentColorType:function(){5==this.myBlocksColorType?this.showHideLighting(!0):this.showHideLighting(!1)},showHideLighting:function(t){this.violetLightning&&(this.violetLightning.active=t)}}),cc._RF.pop()},{}],hx_particleBox:[function(t,e){"use strict";cc._RF.push(e,"22b6b1NIwFA0JB8D62suk4/","hx_particleBox"),cc.Class({extends:cc.Component,properties:{particle_1:cc.Node,particle_2:cc.Node,particle_3:cc.Node,particle_4:cc.Node,cbFunc:null,myType:null,holdParticleScript_1:null,holdParticleScript_2:null,holdParticleScript_3:null,holdParticleScript_4:null,isUpdate:!1},onInit:function(t,e){this.cbFunc=e,this.myType=t,this.isUpdate=!1,this.showNowTypeNoe(t)},showNowTypeNoe:function(t){switch(this.hideAll(),t){case 1:this.showParticleOne(!0),this.holdParticleScript_1=this.particle_1.getComponent(cc.ParticleSystem),this.holdParticleScript_1.resetSystem();break;case 2:this.showParticleTwo(!0),this.holdParticleScript_2=this.particle_2.getComponent(cc.ParticleSystem),this.holdParticleScript_2.resetSystem();break;case 3:this.showParticleThree(!0),this.holdParticleScript_3=this.particle_3.getComponent(cc.ParticleSystem),this.holdParticleScript_3.resetSystem();break;case 4:this.showParticleFour(!0),this.holdParticleScript_4=this.particle_4.getComponent(cc.ParticleSystem),this.holdParticleScript_4.resetSystem()}},hideAll:function(){this.showParticleOne(!1),this.showParticleTwo(!1),this.showParticleThree(!1),this.showParticleFour(!1)},showParticleOne:function(t){this.particle_1&&(this.particle_1.active=t)},showParticleTwo:function(t){this.particle_2&&(this.particle_2.active=t)},showParticleThree:function(t){this.particle_3&&(this.particle_3.active=t)},showParticleFour:function(t){this.particle_4&&(this.particle_4.active=t)},update:function(){0==this.isUpdate&&this.playFinished()},playFinished:function(){switch(this.myType){case 1:this.timeOutPlayClear(this.holdParticleScript_1);break;case 2:this.timeOutPlayClear(this.holdParticleScript_2);break;case 3:this.timeOutPlayClear(this.holdParticleScript_3);break;case 4:this.timeOutPlayClear(this.holdParticleScript_4)}},timeOutPlayClear:function(t){t.stopped&&(this.isUpdate=!0,this.cbFunc&&this.cbFunc(),g_hx_CommonFunc.useRunActionDelayed(this.node,.5,function(){this.closePage()}.bind(this)))},closePage:function(){this.node&&this.node.destroy()}}),cc._RF.pop()},{}],hx_playEffect:[function(t,e){"use strict";var i;cc._RF.push(e,"70457I5YgpK24t+8VCe9/Q2","hx_playEffect"),cc.Class(((i={extends:cc.Component,properties:{hx_anniu:{type:cc.AudioClip,default:null},hx_bgm:{type:cc.AudioClip,default:null},hx_clear1:{type:cc.AudioClip,default:null},hx_clear2:{type:cc.AudioClip,default:null},hx_down:{type:cc.AudioClip,default:null},hx_hammer:{type:cc.AudioClip,default:null},hx_no_down:{type:cc.AudioClip,default:null},hx_over:{type:cc.AudioClip,default:null},hx_start:{type:cc.AudioClip,default:null},hx_warn:{type:cc.AudioClip,default:null},hx_birdFly:{type:cc.AudioClip,default:null},hx_lightning:{type:cc.AudioClip,default:null}},onLoad:function(){this.maxNum=cc.audioEngine.getMaxAudioInstance(),this.audioPool=[]},removeAudio:function(t){var e=this.audioPool.indexOf(t);e>-1&&this.audioPool.splice(e,1)},stopAll:function(){cc.audioEngine.stopAll(),this.audioPool=[]},playBgm:function(){g_hx_commonData.musicCtrl&&this.hx_bgm&&cc.audioEngine.play(this.hx_bgm,!0,1)},stopBgm:function(){this.hx_bgm&&cc.audioEngine.stopMusic(this.hx_bgm,!0)},playMusicEffect:function(t,e){g_hx_commonData.musicCtrl&&(t?cc.audioEngine.playEffect(t,!1):cc.loader.loadRes(e,function(e,i){t=i,cc.audioEngine.playEffect(t,!1)}.bind(this)))},playClear_1:function(){this.playMusicEffect(this.hx_clear1,"childGames/zyhx/zyhx_res/hx_audio/clear1")},playClear_2:function(){this.playMusicEffect(this.hx_clear2,"childGames/zyhx/zyhx_res/hx_audio/clear2")},playDown:function(){this.playMusicEffect(this.hx_down,"childGames/zyhx/zyhx_res/hx_audio/down")},playHammer:function(){this.playMusicEffect(this.hx_hammer,"childGames/zyhx/zyhx_res/hx_audio/hammer")},playStart:function(){this.playMusicEffect(this.hx_start,"childGames/zyhx/zyhx_res/hx_audio/start")},playWarn:function(){this.playMusicEffect(this.hx_warn,"childGames/zyhx/zyhx_res/hx_audio/warn")},playBtn:function(){this.playMusicEffect(this.hx_anniu,"childGames/zyhx/zyhx_res/hx_audio/anniu")},playNoDown:function(){this.playMusicEffect(this.hx_no_down,"childGames/zyhx/zyhx_res/hx_audio/no_down")},playOver:function(){this.playMusicEffect(this.hx_over,"childGames/zyhx/zyhx_res/hx_audio/over")},playBirdFly:function(){this.playMusicEffect(this.hx_birdFly,"childGames/zyhx/zyhx_res/hx_audio/birdFly")},playLightning:function(){this.playMusicEffect(this.hx_lightning,"childGames/zyhx/zyhx_res/hx_audio/lightning")}}).stopAll=function(){cc.audioEngine.stopAll(),this.audioPool=[]},i)),cc._RF.pop()},{}],hx_prize:[function(t,e){"use strict";cc._RF.push(e,"3fc09N/cCVKgLTWddLLVeFd","hx_prize"),cc.Class({extends:cc.Component,properties:{},start:function(){},onInit:function(t){this.gameScript=t},clickGetPrize:function(){var t=this;g_wxPlat.showVideoAd(function(){var e=1;Math.random()>=.5?(e=1,g_hx_localData.setHammerNum(1,0)):(e=2,g_hx_localData.setBirdNum(1,0)),t.gameScript.playGetPrizeAnim(e,function(){g_oEvent.dispatchEvent(g_tEvent.UPDATE_PROP_NUM)}),t.clickClose()},function(){Tips.showToast("\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")})},clickClose:function(){this.node&&(this.node.active=!1)}}),cc._RF.pop()},{}],hx_revivesPage:[function(t,e){"use strict";cc._RF.push(e,"d2e99oaKXxDe60EtR9CGIzq","hx_revivesPage"),cc.Class({extends:cc.Component,properties:{myNowScore:cc.Label,revivesLabel:cc.Label,costDiamondsNum:cc.Label,diamondsBtn:cc.Node,videoBnt:cc.Node,callFunc:null,skipCbFunc:null,revivesNum:null,cyyh_lab:cc.Label,btnDiamondFh:cc.Node,fhlab:cc.Label},onInit:function(t,e,i){this.revivesNum=g_hx_localData.getRevivesNum(),this.callFunc=e,this.skipCbFunc=i,this.showMyScore(t),this.showMyRevivesNum(this.revivesNum),this.notVideoShow(),this.node&&(this.node.zIndex=12);var o=g_hx_gameData.level,a=Math.floor(1e4*(1-9.95/(o+9)))/100;this.cyyh_lab.string="\u5df2\u8d85\u8d8a"+a+"%\u7684\u73a9\u5bb6",this.changeDiamondBtn()},showMyScore:function(t){this.myNowScore&&(this.myNowScore.string=t.toString())},showMyRevivesNum:function(t){this.revivesLabel&&(this.revivesLabel.string="\u5df2\u590d\u6d3b (  "+t.toString()+"  ) \u6b21")},showCostDiamondsNum:function(t){this.costDiamondsNum&&(this.costDiamondsNum.string=t.toString())},changeDiamondBtn:function(){var t=this.btnDiamondFh.getChildByName("zsDiamond"),e=this.btnDiamondFh.getChildByName("zsFree");t&&(t.active=!1),e&&(e.active=!1);var i=g_fkwxxx_locData.getItemCountByName("revive");if(i>0){if(this.fhlab.string="\u590d\u6d3b",this.fhlab.node.x=0,e){e.active=!0;var o=e.getChildByName("freelab");o&&(o.getComponent("cc.Label").string=i)}}else t&&(t.active=!1),this.fhlab.string="\u590d\u6d3b",this.fhlab.node.x=0},clickSkipBtn:function(){var t=g_arder_gmsc.getRevivesEjectVideoRate_zyhx(),e=Math.random()<t;g_hx_needCtrlData.isAlreadyEjectVideo=e,this.skipCbFunc&&this.skipCbFunc(),this.closePage()},clickDiamondsRevives:function(){var t=this;if(g_fkwxxx_locData.getItemCountByName("revive")>0)return g_fkwxxx_locData.changeItemCount("revive",-1),this.revivesNum++,g_hx_localData.setRevivesNum(this.revivesNum),this.callFunc&&this.callFunc(),void this.closePage();g_wxPlat.showVideoAd(function(){t.revivesNum++,g_hx_localData.setRevivesNum(t.revivesNum),t.callFunc&&t.callFunc(),t.closePage()},function(){Tips.showToast("\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")})},clickVideoRevives:function(){var t=this;g_wxPlat.showVideoAd(function(){t.revivesNum++,g_hx_localData.setRevivesNum(t.revivesNum),t.callFunc&&t.callFunc(),t.closePage()},function(){})},closePage:function(){this.node&&(this.node.active=!1)},notVideoShow:function(){g_arder_gmsc.getNotVedio()?(this.diamondsBtn&&(this.diamondsBtn.active=!0,this.diamondsBtn.x=-2,this.diamondsBtn.y=-196),this.videoBnt&&(this.videoBnt.active=!1)):(this.diamondsBtn&&(this.diamondsBtn.active=!0,this.diamondsBtn.x=-2,this.diamondsBtn.y=-90),this.videoBnt&&(this.videoBnt.active=!0,this.videoBnt.x=0,this.videoBnt.y=-257))}}),cc._RF.pop()},{}],hx_rowClearAction:[function(t,e){"use strict";cc._RF.push(e,"bc4efS16i5F2oDByN41d+sg","hx_rowClearAction"),cc.Class({extends:cc.Component,properties:{callBack:null},onInit:function(t){this.callBack=t,this.node.getComponent(cc.Animation).play("ZYX_shandong"),this.node.getComponent(cc.Animation).on("finished",this.onFinish,this)},onFinish:function(){this.callBack&&this.callBack(),this.closePage()},closePage:function(){this.node&&this.node.destroy()}}),cc._RF.pop()},{}],hx_stopGame:[function(t,e){"use strict";cc._RF.push(e,"3e962QweMlEPb3Mi/Uabfc4","hx_stopGame"),cc.Class({extends:cc.Component,properties:{musicIconOpen:cc.Node,musicIconClose:cc.Node,cbFunc:null,sumbitScore:null,sumbitInfo:null,parentScript:null},onInit:function(t,e,i,o){this.musicIcon(),this.cbFunc=t,this.parentScript=o,this.ejectInsertAd(),this.sumbitScore=e,this.sumbitInfo=i,this.node&&(this.node.zIndex=11),g_wxPlat.showInterstitialAd(),g_hx_localData.setHistoryBlockData(this.sumbitInfo,this.sumbitScore)},clickRestartGame:function(){this.cbFunc&&this.cbFunc(),this.closePage()},clickContinueGame:function(){this.closePage()},clickBackHall:function(){this.parentScript.ctrlMusicScript.stopAll(),g_wanxArder.backToLobby()},clickCtrlMusic:function(){g_hx_commonData.musicCtrl=!g_hx_commonData.musicCtrl,g_hx_localData.setIsSoundClose(g_hx_commonData.musicCtrl),0==g_hx_commonData.musicCtrl?this.parentScript.ctrlMusicScript.stopAll():this.parentScript.ctrlMusicScript.playBgm(),this.musicIcon()},closePage:function(){this.node&&(this.node.active=!1)},musicIcon:function(){g_hx_commonData.musicCtrl?this.musicIconClose.active=!1:this.musicIconClose.active=!0},ejectInsertAd:function(){}}),cc._RF.pop()},{}],hx_threeBlocks:[function(t,e){"use strict";cc._RF.push(e,"97c67uXgTZNzKjDjrjWSnVT","hx_threeBlocks"),cc.Class({extends:cc.Component,properties:{id:null,keelNode:cc.Node,violetLightning:cc.Node,_armatureDisPlay:null,_armature:null,touchStartPos:null,myBlocksColorType:null,blockNumType:3,myData:null,gameScript:null,startPos:null,movePos:null,lastPosX:null,myWidth:194,savaTimer:null,isSinglePoint:!1,moveTargetPos:null},onLoad:function(){this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this)},onInit:function(t,e,i){this.registerTouchEvent(),null!=this._armatureDisPlay&&null!=this._armature||(this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature()),this.myBlocksColorType=t,this.myData=e,this.gameScript=i,this.playBlocksAction(t),this.judgmentColorType(),this.playBlinkAction(),this.isSinglePoint=!1},completeEvent:function(){},onDestroy:function(){this.clearMyTimer(),this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this)},destroyMyEvent:function(){this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this),g_hx_commonData.singlePointStartTouch=!1},playBlocksAction:function(t){switch(t){case 0:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_3_jing",0);break;case 1:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_3_jing",0);break;case 2:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_3_jing",0);break;case 3:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_3_jing",0);break;case 4:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_3_jing",0);break;case 5:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_3_jing",0)}},getBlocksColorType:function(){return this.myBlocksColorType},getBlocksNumType:function(){return this.blockNumType},updateMyData:function(t){this.myData=t},registerTouchEvent:function(){this.node.on("touchstart",this.touchStart.bind(this),this),this.node.on("touchmove",this.touchMove.bind(this),this),this.node.on("touchend",this.touchFinish.bind(this),this),this.node.on("touchcancel",this.touchFinish.bind(this),this)},touchStart:function(t){g_hx_commonData.singlePointStartTouch||(this.isSinglePoint=!0,g_hx_commonData.singlePointStartTouch=!0,this.gameScript.backBlocksInfo(this.myData),this.startPos=cc.v2(t.target.x,t.target.y),this.touchStartPos=cc.v2(this.myData.pos.x,this.myData.pos.y),g_hx_gameData.isCanMoveUp&&(this.gameScript.showBgBlockPos(3,this.myData.blockColor,this.node.x+64.9,this.node.y-67),this.gameScript.showBeamPos(this.node.x+64.9,this.myWidth)))},touchMove:function(t){if(0!=this.isSinglePoint&&g_hx_gameData.isCanMoveUp&&-1!=g_hx_commonData.touchInfo.state){this.movePos=cc.v2(t.currentTouch._point.x,t.currentTouch._point.y);var e=this.node.parent.convertToNodeSpaceAR(this.movePos);e.x>=g_hx_commonData.touchInfo.min.x&&e.x<=g_hx_commonData.touchInfo.max.x?(this.node.x=e.x,this.lastPosX=e.x,this.gameScript.showBeamPos(e.x+64.9,this.myWidth)):e.x<g_hx_commonData.touchInfo.min.x?(this.node.x=g_hx_commonData.touchInfo.min.x,this.lastPosX=g_hx_commonData.touchInfo.min.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.min.x+64.9,this.myWidth)):e.x>g_hx_commonData.touchInfo.max.x?(this.node.x=g_hx_commonData.touchInfo.max.x,this.lastPosX=g_hx_commonData.touchInfo.max.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.max.x+64.9,this.myWidth)):console.log("\u4e0d\u53ef\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684")}},touchFinish:function(){if(0!=this.isSinglePoint){if(g_hx_gameData.isCanMoveUp){g_hx_gameData.isCanMoveUp=!1,g_hx_gameData.doubleHitNum=0,this.gameScript.setnBeamHide(),this.gameScript.hideBlockBg();var t=this.gameScript.comparisonPos(this.lastPosX);if(null!=t){this.updateMyNodePos(t.pos);var e=this.gameScript.touchEndchangeData(this.myData,t);this.updateMyData(e),this.touchStartPos.x==t.pos.x?g_hx_gameData.isCanMoveUp=!0:(g_hx_gameState.touchEndCancelState=1,this.gameScript.blocksDown())}else console.log("test info  == null  "),g_hx_gameData.isCanMoveUp=!0}g_hx_commonData.singlePointStartTouch=!1,this.isSinglePoint=!1}},updateMyNodePos:function(t){this.node.x=t.x},playBlinkAction:function(){this.clearMyTimer(),this.savaTimer=setInterval(function(){Math.random()<=g_hx_actionTime.BLINK_RATE&&this.blinkAction(this.myBlocksColorType)}.bind(this),g_hx_actionTime.BLINK_INTERVAL)},clearMyTimer:function(){clearInterval(this.savaTimer),this.savaTimer=null},blinkAction:function(t){if(null!=this.node&&0!=this.node.active){var e=Math.random()>=.5;switch(t){case 0:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_fen_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_3_yan_up",1);break;case 1:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lan_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_3_yan_up",1);break;case 2:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_huang_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_3_yan_up",1);break;case 3:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_hong_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_3_yan_up",1);break;case 4:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lv_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_3_yan_up",1);break;case 5:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_zi_3",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_3_yan_up",1)}}else this.clearMyTimer()},judgmentColorType:function(){5==this.myBlocksColorType?this.showHideLighting(!0):this.showHideLighting(!1)},showHideLighting:function(t){this.violetLightning&&(this.violetLightning.active=t)}}),cc._RF.pop()},{}],hx_twoBlocks:[function(t,e){"use strict";cc._RF.push(e,"aa4c9L7GqRHDrsZjGzqSRX3","hx_twoBlocks"),cc.Class({extends:cc.Component,properties:{id:null,keelNode:cc.Node,violetLightning:cc.Node,_armatureDisPlay:null,_armature:null,touchStartPos:null,myBlocksColorType:null,blockNumType:2,myData:null,gameScript:null,startPos:null,movePos:null,lastPosX:null,myWidth:129,savaTimer:null,isSinglePoint:!1,moveTargetPos:null},onLoad:function(){this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature(),this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE,this.completeEvent,this)},onInit:function(t,e,i){this.registerTouchEvent(),null!=this._armatureDisPlay&&null!=this._armature||(this._armatureDisPlay=this.keelNode.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisPlay.armature()),this.myBlocksColorType=t,this.myData=e,this.gameScript=i,this.playBlocksAction(t),this.judgmentColorType(),this.playBlinkAction(),this.isSinglePoint=!1},completeEvent:function(){},onDestroy:function(){this.clearMyTimer(),this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this)},destroyMyEvent:function(){this.node.off("touchstart",this.touchStart.bind(this),this),this.node.off("touchmove",this.touchMove.bind(this),this),this.node.off("touchend",this.touchFinish.bind(this),this),this.node.off("touchcancel",this.touchFinish.bind(this),this),g_hx_commonData.singlePointStartTouch=!1},playBlocksAction:function(t){switch(t){case 0:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_2_jing",0);break;case 1:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_2_jing",0);break;case 2:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_2_jing",0);break;case 3:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_2_jing",0);break;case 4:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_2_jing",0);break;case 5:g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_2_jing",0)}},getBlocksColorType:function(){return this.myBlocksColorType},getBlocksNumType:function(){return this.blockNumType},updateMyData:function(t){this.myData=t},registerTouchEvent:function(){this.node.on("touchstart",this.touchStart.bind(this),this),this.node.on("touchmove",this.touchMove.bind(this),this),this.node.on("touchend",this.touchFinish.bind(this),this),this.node.on("touchcancel",this.touchFinish.bind(this),this)},touchStart:function(t){g_hx_commonData.singlePointStartTouch||(this.isSinglePoint=!0,g_hx_commonData.singlePointStartTouch=!0,this.gameScript.backBlocksInfo(this.myData),this.startPos=cc.v2(t.target.x,t.target.y),this.touchStartPos=cc.v2(this.myData.pos.x,this.myData.pos.y),g_hx_gameData.isCanMoveUp&&(this.gameScript.showBgBlockPos(2,this.myData.blockColor,this.node.x+31.9,this.node.y-67),this.gameScript.showBeamPos(this.node.x+31.9,this.myWidth)))},touchMove:function(t){if(0!=this.isSinglePoint&&g_hx_gameData.isCanMoveUp&&-1!=g_hx_commonData.touchInfo.state){this.movePos=cc.v2(t.currentTouch._point.x,t.currentTouch._point.y);var e=this.node.parent.convertToNodeSpaceAR(this.movePos);e.x>=g_hx_commonData.touchInfo.min.x&&e.x<=g_hx_commonData.touchInfo.max.x?(this.node.x=e.x,this.lastPosX=e.x,this.gameScript.showBeamPos(e.x+31.9,this.myWidth)):e.x<g_hx_commonData.touchInfo.min.x?(this.node.x=g_hx_commonData.touchInfo.min.x,this.lastPosX=g_hx_commonData.touchInfo.min.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.min.x+31.9,this.myWidth)):e.x>g_hx_commonData.touchInfo.max.x?(this.node.x=g_hx_commonData.touchInfo.max.x,this.lastPosX=g_hx_commonData.touchInfo.max.x,this.gameScript.showBeamPos(g_hx_commonData.touchInfo.max.x+31.9,this.myWidth)):console.log("\u4e0d\u53ef\u80fd\u6267\u884c\u5230\u8fd9\u91cc\u7684")}},touchFinish:function(){if(0!=this.isSinglePoint){if(g_hx_gameData.isCanMoveUp){g_hx_gameData.isCanMoveUp=!1,g_hx_gameData.doubleHitNum=0,this.gameScript.setnBeamHide(),this.gameScript.hideBlockBg();var t=this.gameScript.comparisonPos(this.lastPosX);if(null!=t){this.updateMyNodePos(t.pos);var e=this.gameScript.touchEndchangeData(this.myData,t);this.updateMyData(e),this.touchStartPos.x==t.pos.x?g_hx_gameData.isCanMoveUp=!0:(g_hx_gameState.touchEndCancelState=1,this.gameScript.blocksDown())}else console.log("test info  == null  "),g_hx_gameData.isCanMoveUp=!0}g_hx_commonData.singlePointStartTouch=!1,this.isSinglePoint=!1}},updateMyNodePos:function(t){this.node.x=t.x},playBlinkAction:function(){this.clearMyTimer(),this.savaTimer=setInterval(function(){Math.random()<=g_hx_actionTime.BLINK_RATE&&this.blinkAction(this.myBlocksColorType)}.bind(this),g_hx_actionTime.BLINK_INTERVAL)},clearMyTimer:function(){clearInterval(this.savaTimer),this.savaTimer=null},blinkAction:function(t){if(null!=this.node&&0!=this.node.active){var e=Math.random()>=.5;switch(t){case 0:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_fen_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_fen_2_yan_up",1);break;case 1:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lan_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lan_2_yan_up",1);break;case 2:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_huang_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_huang_2_yan_up",1);break;case 3:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_hong_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_hong_2_yan_up",1);break;case 4:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_lv_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_lv_2_yan_up",1);break;case 5:e?g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zhayan_zi_2",1):g_hx_CommonFunc.playBgBlockAction(this._armatureDisPlay,"ZYX_zi_2_yan_up",1)}}else this.clearMyTimer()},judgmentColorType:function(){5==this.myBlocksColorType?this.showHideLighting(!0):this.showHideLighting(!1)},showHideLighting:function(t){this.violetLightning&&(this.violetLightning.active=t)}}),cc._RF.pop()},{}],hx_videoUseProp:[function(t,e){"use strict";cc._RF.push(e,"d8841CiOp9P+ZTpkyJqSlO+","hx_videoUseProp"),cc.Class({extends:cc.Component,properties:{bird0:cc.Node,bird1:cc.Node,bird2:cc.Node,bird3:cc.Node,bird4:cc.Node,bird5:cc.Node,useDiamondNode:cc.Node,hammerProp:cc.Node,birdProp:cc.Node,tipLabel:cc.Label,effectTipsLabel:cc.Label,videoBtn:cc.Node,ImmediateUseBtn:cc.Node,propType:null,cbFunc:null,closeCb:null,popUpType:null,isUseDiamond:!1},onInit:function(t,e,i,o){void 0===o&&(o=1),this.popUpType=o,this.propType=t,this.cbFunc=e,this.closeCb=i,this.isUseDiamond=!1,this.showProp(),this.node&&(this.node.zIndex=14),this.showTypeNotOne()},showProp:function(){if(1==this.propType)this.hammerProp.active=!0,this.hideAllBird(),this.tipLabel.string="\u5361\u4f4f\u4e86\uff1f\n\u9524\u5b50\u80fd\u52a9\u4f60\u4e00\u81c2\u4e4b\u529b".toString(),this.effectTipsLabel.string="\u5b83\u53ef\u4ee5\u5c06\u5927\u65b9\u5757\u53d8\u6210\u591a\u4e2a\u5c0f\u65b9\u5757".toString();else{this.hammerProp.active=!1;var t=g_hx_localData.getBirdColor();this.showBird(t),this.birdProp.active=!0,this.tipLabel.string="\u5361\u4f4f\u4e86\uff1f\n\u5c0f\u9e1f\u80fd\u52a9\u4f60\u4e00\u81c2\u4e4b\u529b".toString(),this.effectTipsLabel.string="\u5b83\u53ef\u4ee5\u6d88\u9664\u4e0e\u5176\u4ed6\u989c\u8272\u76f8\u540c\u7684\u65b9\u5757".toString()}},clickWatchVideo:function(){var t=this;this.propType,g_wxPlat.showVideoAd(function(){console.log("\u89c6\u9891\u6210\u529f,\u9053\u5177\u4f7f\u7528\u5b8c\u6210!"),t.cbFunc&&t.cbFunc(),t.closePage()},function(){Tips.showToast("\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6~")})},clickUseImmediately:function(){if(1==this.popUpType){if(g_fkwxxx_locData.getStars()<g_hx_costDiamonds.PropCostDiamonds)return void Tips.showToast("\u94bb\u77f3\u6570\u91cf\u4e0d\u8db3!")}else 2==this.popUpType?(this.cbFunc&&this.cbFunc(),this.closePage()):console.log("video prop type:",this.popUpType)},closePage:function(){this.node.active=!1},clickClose:function(){this.closeCb&&this.closeCb(),this.closePage()},showBird:function(t){switch(this.hideAllBird(),t){case 0:this.bird0.active=!0;break;case 1:this.bird1.active=!0;break;case 2:this.bird2.active=!0;break;case 3:this.bird3.active=!0;break;case 4:this.bird4.active=!0;break;case 5:this.bird5.active=!0}},hideAllBird:function(){this.bird0.active=!1,this.bird1.active=!1,this.bird2.active=!1,this.bird3.active=!1,this.bird4.active=!1,this.bird5.active=!1},showTypeNotOne:function(){if(1!=this.popUpType){g_hx_localData.setActiveUsePropNum(1);var t=g_hx_localData.getPropNum();1==this.propType?t.hammner>0?this.btnIsShow(!1):this.btnIsShow(!0):t.bird>0?this.btnIsShow(!1):this.btnIsShow(!0)}else g_arder_gmsc.getNotVedio()?(this.isUseDiamond=!0,this.btnIsShow(!1)):this.btnIsShow(!0)},accordingDiamondshowBtn:function(){g_fkwxxx_locData.getStars()<g_hx_costDiamonds.PropCostDiamonds?(this.isUseDiamond=!1,g_arder_gmsc.getNotVedio()?(this.isUseDiamond=!0,this.btnIsShow(!1)):this.btnIsShow(!0)):(this.isUseDiamond=!0,this.btnIsShow(!1))},btnIsShow:function(t){this.videoBtn.active=t,this.ImmediateUseBtn.active=!t},showIsUseDiamond:function(){}}),cc._RF.pop()},{}]},{},["hx_AnimationManage","hx_fourBlocks","hx_oneBlocks","hx_threeBlocks","hx_twoBlocks","hx_CommonData","hx_CommonFunc","hx_playEffect","hx_GameData","hx_LGame","hx_LocalData","hx_RowsData","hx_BgCloud","hx_CreateBlocks","hx_Game","hx_LibsGrid","hx_NodePool","hx_Prop","hx_Mgr","hx_birdAnim","hx_cloud","hx_continueGame","hx_gameFail","hx_girds","hx_hammerKeel","hx_lightning","hx_noviceGuide","hx_particleBox","hx_prize","hx_revivesPage","hx_rowClearAction","hx_stopGame","hx_videoUseProp"]);